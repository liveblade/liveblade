/*!
 * LiveBlade v1.0.1
 * Production-ready AJAX for Laravel Blade
 * @license MIT
 *
 * Included:
 *   - core
 *   - html-controller
 *   - rate-limiter
 *   - state
 *   - html
 *   - nav
 *   - search
 *   - filter
 *   - sort
 *   - button
 *   - toggle
 *   - data
 *   - pagination
 *   - quick-search
 *   - cascade
 *   - confirm
 *   - rating
 *   - word-counter
 */
!function(t,e){"use strict";if(t.LiveBlade)return;const i="1.0.1",s="1"===localStorage.getItem("lb_debug");function n(...t){s&&console.log("[LiveBlade]",...t)}function r(...t){console.warn("[LiveBlade]",...t)}function a(...t){console.error("[LiveBlade]",...t)}let o=0;const l={version:i,controllers:new WeakMap,instances:new Set,config:{debounce:300,throttle:100,retryDelay:2e3,maxRetries:3,requestTimeout:3e4,skeletonHTML:null,errorHTML:null,successDuration:1500,errorDuration:3e3,updateUrl:!1,updateUrlMode:"push",preserveScroll:!0,preserveInputs:!0,preserveFocus:!0,smartUpdate:!0,contentHashLength:500},csrf:null,_events:Object.create(null),_features:Object.create(null),_binders:Object.create(null),_initialized:!1};var c;l.utils={log:n,warn:r,error:a,escapeHtml:t=>null==t?"":String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),cssEscape:t=>null==t?"":"undefined"!=typeof CSS&&CSS.escape?CSS.escape(t):String(t).replace(/([^\w-])/g,"\\$1"),sameOrigin:function(e){try{return new URL(e,t.location.href).origin===t.location.origin}catch{return!1}},uniqueId:function(t="lb"){return`${t}_${++o}_${Date.now().toString(36)}`},debounce:function(t,e){let i;return function(...s){clearTimeout(i),i=setTimeout(()=>t.apply(this,s),e)}},throttle:function(t,e){let i;return function(...s){i||(t.apply(this,s),i=!0,setTimeout(()=>i=!1,e))}},parseUrl:function(e){try{const i=new URL(e,t.location.href);return{path:i.pathname,params:Object.fromEntries(i.searchParams.entries()),hash:i.hash}}catch{return{path:"/",params:{},hash:""}}},buildUrl:function(e,i,s=""){const n=new URL(e,t.location.href);return n.search="",Object.entries(i).forEach(([t,e])=>{null!=e&&""!==e&&n.searchParams.set(t,e)}),n.pathname+n.search+(s||"")}},l.refreshCsrf=function(){return this.csrf=e.querySelector('meta[name="csrf-token"]')?.content||"",this.csrf||r("CSRF token not found."),this},l.getCsrf=function(){return this.csrf||this.refreshCsrf(),this.csrf},l.on=function(t,e){return"function"!=typeof e||(this._events[t]||=[]).push(e),this},l.off=function(t,e){return this._events[t]?(e?this._events[t]=this._events[t].filter(t=>t!==e):delete this._events[t],this):this},l.emit=function(t,e){return(this._events[t]||[]).forEach(t=>{try{t(e)}catch(t){a("Event listener error:",t)}}),this},l.once=function(t,e){const i=s=>{this.off(t,i),e(s)};return this.on(t,i)},l.use=function(t,e={}){return"function"==typeof t?t(this,e):t?.install&&t.install(this,e),this},l.registerFeature=function(t,e){return this._features[t]?(r(`Feature "${t}" already registered.`),this):(this._features[t]=e,"function"==typeof e.init&&e.init(this),n(`Feature "${t}" registered.`),this)},l.hasFeature=function(t){return!!this._features[t]},l.registerBinder=function(t,e){return this._binders[t]?(r(`Binder "${t}" already registered.`),this):(this._binders[t]=e,n(`Binder "${t}" registered.`),this)},l.resolve=function(t){if(!t)return null;const i=t.getAttribute("data-lb-target");if(i){const t=e.querySelector(i);return t?l.controllers.get(t):null}const s=t.closest('[data-lb="html"], [data-lb-html], [data-lb-container]');return s?l.controllers.get(s):null},l.bind=function(t=e){return Object.entries(this._binders).forEach(([e,i])=>{if(!i.selector)return;t.querySelectorAll(`${i.selector}:not([data-lb-bound~="${e}"])`).forEach(t=>{try{i.bind(t,this);const s=t.getAttribute("data-lb-bound")||"";t.setAttribute("data-lb-bound",(s+" "+e).trim())}catch(t){a(`Binder "${e}" error:`,t)}})}),this},l.refresh=function(t){if("string"==typeof t){const i=l.controllers.get(e.querySelector(t));i&&i.refresh()}else if(t instanceof HTMLElement){const e=l.controllers.get(t);e&&e.refresh()}else l.instances.forEach(t=>t.refresh());return this},l.cleanup=function(t=e){return t.querySelectorAll("[data-lb-bound]").forEach(t=>{const e=l.controllers.get(t);e?.dispose&&e.dispose(),l.controllers.delete(t),t.removeAttribute("data-lb-bound"),t._lbDataTimer&&(clearInterval(t._lbDataTimer),delete t._lbDataTimer)}),this},l.configure=function(t){return t&&"object"==typeof t&&Object.assign(l.config,t),this},l.debug=function(t=!0){return localStorage.setItem("lb_debug",t?"1":"0"),console.log("[LiveBlade] Debug mode "+(t?"enabled":"disabled")+". Reload page."),this},l.test=function(t){const i="string"==typeof t?e.querySelector(t):t;if(!i)return console.log("âŒ Not found:",t),null;console.log("âœ… Found:",i);const s=l.resolve(i);return s&&console.log("ðŸŽ® Controller:",s.id,s.getUrl()),{el:i,ctrl:s}},l.getController=function(t){const i="string"==typeof t?e.querySelector(t):t;return i?l.controllers.get(i):null},l.getAllControllers=()=>Array.from(l.instances),l.init=function(){return this._initialized||(this._initialized=!0,this.refreshCsrf(),e.addEventListener("csrf-token-update",()=>this.refreshCsrf()),this.bind(),n("Initialized v"+i),this.emit("init")),this},c=()=>l.init(),"loading"===e.readyState?e.addEventListener("DOMContentLoaded",c):c(),t.LiveBlade=l}(window,document),function(t){"use strict";function e(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e&=e;return e}function i(t,e){this.el=t,this.LiveBlade=e,this.id=e.utils.uniqueId("ctrl"),this.path="/",this.params={},this.hash="",this.abortController=null,this.timeoutId=null,this.refreshTimer=null,this.requestId=0,this.retryCount=0,this.lastHTML=null,this._historyInitialized=!1,this._disposed=!1,t.getAttribute("role")||t.setAttribute("role","region"),t.getAttribute("aria-live")||t.setAttribute("aria-live","polite"),e.instances.add(this),this._initFromAttributes()}i.prototype._initFromAttributes=function(){const t=this.el,e=t.getAttribute("data-lb-fetch")||t.getAttribute("data-lb-html")||t.getAttribute("data-lb");e&&"html"!==e&&this.setUrl(e);const i=parseInt(t.getAttribute("data-lb-interval"),10);i>0&&(this.refreshTimer=setInterval(()=>{this._disposed||this.refresh()},1e3*i)),e&&"html"!==e&&this.load(!1,{pushState:!1,isInitial:!0})},i.prototype.setUrl=function(t){const{sameOrigin:e,parseUrl:i}=this.LiveBlade.utils;if(!t||!e(t))return this;const s=i(t);return this.path=s.path,this.params=s.params,this.hash=s.hash,this},i.prototype.updateParam=function(t,e){return null==e||""===e?delete this.params[t]:this.params[t]=String(e),this},i.prototype.updateParams=function(t){return Object.entries(t).forEach(([t,e])=>this.updateParam(t,e)),this},i.prototype.resetPage=function(){return delete this.params.page,this},i.prototype.getUrl=function(){return this.LiveBlade.utils.buildUrl(this.path,this.params,this.hash)},i.prototype.showSkeleton=function(){this.el.innerHTML.trim()||(this.el.innerHTML=this.LiveBlade.config.skeletonHTML||'\n            <div class="lb-skeleton" role="status" aria-label="Loading">\n                <div class="lb-skeleton-line"></div>\n                <div class="lb-skeleton-line" style="width:90%"></div>\n                <div class="lb-skeleton-line" style="width:75%"></div>\n            </div>\n        ')},i.prototype.setLoading=function(t){this.el.classList.toggle("lb-loading",t),this.el.setAttribute("aria-busy",t?"true":"false"),this.LiveBlade.emit(t?"loading:start":"loading:end",{controller:this})},i.prototype.abortPendingRequest=function(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},i.prototype.load=async function(i=!1,s={}){if(this._disposed)return;const{sameOrigin:n,log:r,escapeHtml:a}=this.LiveBlade.utils,o=this.LiveBlade.config,l=this.getUrl();if(!l||!n(l))return;if(this.LiveBlade.rateLimiter&&!this.LiveBlade.rateLimiter.canRequest(l))return;this.requestId+=1;const c=this.requestId;s.isInitial&&!i&&this.showSkeleton(),this.abortPendingRequest(),this.abortController=new AbortController,this.timeoutId=setTimeout(()=>{this.abortController&&this.abortController.abort()},o.requestTimeout);const d=this.el.innerHTML,h=this.LiveBlade.state?.saveAll(this.el,o);let u,p;this.setLoading(!0),r("Fetching:",l);try{u=await fetch(l,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest","X-LiveBlade":"true",Accept:"application/json, text/html","X-CSRF-TOKEN":this.LiveBlade.getCsrf()},credentials:"same-origin",signal:this.abortController.signal})}catch(t){if(this.timeoutId&&clearTimeout(this.timeoutId),"AbortError"===t.name)return;return void this.handleError(t,l,i)}if(this.timeoutId&&clearTimeout(this.timeoutId),c!==this.requestId)return;try{if(u.redirected)return void(t.location.href=u.url);if(!u.ok)throw new Error(`HTTP ${u.status}`);p=(u.headers.get("content-type")||"").includes("application/json")?await u.json():{html:await u.text(),has_more:!1}}catch(t){return void this.handleError(t,l,i)}finally{this.setLoading(!1)}const b="string"==typeof p.html?p.html:"",f=!!p.has_more,m=i||!o.smartUpdate||function(t,i,s=500){return!(t===i||t&&i&&t.length===i.length&&t.slice(0,s)===i.slice(0,s)&&t.slice(-s)===i.slice(-s)&&e(t)===e(i))}(d,b,o.contentHashLength);if(i?this.el.insertAdjacentHTML("beforeend",b):m&&(this.el.innerHTML=b,this.lastHTML=b),this.el.dataset.lbHasMore=f?"1":"0",this.retryCount=0,m&&this.LiveBlade.bind(this.el),!i&&h&&this.LiveBlade.state?.restoreAll(this.el,h),!i&&s.pushState&&t.history&&o.updateUrl){const e=this.getUrl(),i={liveblade:!0,controllerId:this.id,path:this.path,params:{...this.params}};!this._historyInitialized||s.replaceState||"replace"===o.updateUrlMode?(t.history.replaceState(i,"",e),this._historyInitialized=!0):t.history.pushState(i,"",e)}this.el.dispatchEvent(new CustomEvent("lb:loaded",{detail:{url:l,data:p,append:i},bubbles:!0})),this.LiveBlade.emit("loaded",{controller:this,url:l,data:p,append:i,changed:m})},i.prototype.handleError=function(t,e,i){if(this._disposed||"AbortError"===t.name)return;const{error:s,escapeHtml:n}=this.LiveBlade.utils,r=this.LiveBlade.config;if(s("Request failed:",t.message),this.retryCount<r.maxRetries){this.retryCount++;const t=r.retryDelay*this.retryCount;return void setTimeout(()=>{this._disposed||this.load(i,{})},t)}const a=!1===navigator?.onLine;this.el.innerHTML=function(t,e=!1,i){return`\n            <div class="lb-error" role="alert">\n                <div class="lb-error-icon">\n                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                        <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/>\n                        <line x1="12" y1="16" x2="12.01" y2="16"/>\n                    </svg>\n                </div>\n                <strong>Failed to load content</strong>\n                <p>${e?"You appear to be offline.":i(t)}</p>\n                <button type="button" class="lb-retry-btn" data-lb-action="refresh">\n                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                        <path d="M23 4v6h-6M1 20v-6h6"/>\n                        <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>\n                    </svg>\n                    Try Again\n                </button>\n            </div>\n        `}(t.message,a,n),this.LiveBlade.bind(this.el),this.el.dispatchEvent(new CustomEvent("lb:error",{detail:{error:t,url:e},bubbles:!0})),this.LiveBlade.emit("error",{controller:this,error:t,url:e,offline:a})},i.prototype.refresh=function(){return this.resetPage(),this.load(!1,{pushState:!0})},i.prototype.navigate=function(t){return t&&this.setUrl(t),this.load(!1,{pushState:!0})},i.prototype.loadMore=function(){const t=parseInt(this.params.page||"1",10);return this.params.page=String(t+1),this.load(!0)},i.prototype.dispose=function(){this._disposed||(this._disposed=!0,this.abortPendingRequest(),this.refreshTimer&&clearInterval(this.refreshTimer),this.LiveBlade.instances.delete(this),this.LiveBlade.controllers.delete(this.el),this.el.removeAttribute("data-lb-bound"))};const s={init(e){e.HtmlController=i,t.addEventListener("popstate",i=>{i.state?.liveblade&&e.instances.forEach(e=>{i.state.path?(e.path=i.state.path,e.params={...i.state.params}):e.setUrl(t.location.href),e.load(!1,{pushState:!1})})}),t.addEventListener("online",()=>{e.emit("online"),e.instances.forEach(t=>{t.retryCount>0&&(t.retryCount=0,t.refresh())})}),t.addEventListener("offline",()=>e.emit("offline"))}};t.LiveBlade&&t.LiveBlade.registerFeature("html-controller",s),"undefined"!=typeof module&&module.exports&&(module.exports={HtmlController:i,HtmlControllerFeature:s})}(window,document),function(t){"use strict";const e={requests:new Map,maxRequests:100,windowMs:6e4,cleanupInterval:null,init(t){this.cleanupInterval||(this.cleanupInterval=setInterval(()=>this.cleanup(),this.windowMs),t.rateLimiter=this)},cleanup(){const t=Date.now();for(const[e,i]of this.requests){const s=i.filter(e=>t-e<this.windowMs);0===s.length?this.requests.delete(e):this.requests.set(e,s)}},canRequest(e){const i=Date.now(),s=(this.requests.get(e)||[]).filter(t=>i-t<this.windowMs);return s.length>=this.maxRequests?(t.LiveBlade&&t.LiveBlade.utils.log("Rate limit exceeded:",e),!1):(s.push(i),this.requests.set(e,s),!0)},reset(t){t?this.requests.delete(t):this.requests.clear()}};t.LiveBlade&&t.LiveBlade.registerFeature("rate-limiter",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={init(t){t.state=this},saveScrollPosition:t=>({top:t.scrollTop,left:t.scrollLeft}),restoreScrollPosition(t,e){e&&(t.scrollTop=e.top,t.scrollLeft=e.left)},saveFocusState(t){const e=document.activeElement;return e&&t.contains(e)?{id:e.id,name:e.name,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd}:null},restoreFocusState(e,i){if(!i)return;const s=t.LiveBlade?.utils?.cssEscape||(t=>t);let n=null;if(i.id&&(n=e.querySelector(`#${s(i.id)}`)),!n&&i.name&&(n=e.querySelector(`[name="${s(i.name)}"]`)),n?.focus&&(n.focus(),null!=i.selectionStart&&n.setSelectionRange))try{n.setSelectionRange(i.selectionStart,i.selectionEnd)}catch{}},saveInputStates(e){const i=e.querySelectorAll("input, textarea, select"),s=[],n=t.LiveBlade?.utils?.cssEscape||(t=>t);return i.forEach(t=>{const e=t.id,i=t.name;let r=null;if(e)r=`#${n(e)}`;else if(i){r=`${t.tagName.toLowerCase()}[name="${n(i)}"]`,"radio"===t.type&&(r+=`[value="${n(t.value)}"]`)}if(!r)return;const a={selector:r,tagName:t.tagName};"checkbox"===t.type?(a.type="checkbox",a.checked=t.checked):"radio"===t.type?(a.type="radio",a.checked=t.checked):"SELECT"===t.tagName?(a.type="select",a.value=t.value,a.selectedIndex=t.selectedIndex,t.multiple&&(a.selectedValues=Array.from(t.selectedOptions).map(t=>t.value))):(a.type="text",a.value=t.value),s.push(a)}),s},restoreInputStates(t,e,i=!0){e?.length&&e.forEach(e=>{const s=t.querySelector(e.selector);s&&(i&&document.activeElement===s||("checkbox"===e.type||"radio"===e.type?s.checked=e.checked:"select"===e.type?e.selectedValues&&s.multiple?Array.from(s.options).forEach(t=>{t.selected=e.selectedValues.includes(t.value)}):(s.value=e.value,s.value!==e.value&&e.selectedIndex>=0&&(s.selectedIndex=e.selectedIndex)):s.value=e.value))})},saveAll(t,e={}){return{scroll:!1!==e.preserveScroll?this.saveScrollPosition(t):null,focus:!1!==e.preserveFocus?this.saveFocusState(t):null,inputs:!1!==e.preserveInputs?this.saveInputStates(t):null}},restoreAll(t,e){e&&(this.restoreScrollPosition(t,e.scroll),this.restoreInputStates(t,e.inputs),this.restoreFocusState(t,e.focus))}};t.LiveBlade&&t.LiveBlade.registerFeature("state",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={selector:'[data-lb="html"], [data-lb-html], [data-lb]:not([data-lb="nav"]):not([data-lb="search"]):not([data-lb="filter"]):not([data-lb="button"]):not([data-lb="toggle-update"]):not([data-lb="data"]):not([data-lb="pagination"]):not([data-lb="form"])',bind(t,e){const i=t.getAttribute("data-lb");if(i&&!i.startsWith("/")&&"html"!==i)return;if(e.controllers.has(t))return;if(!e.HtmlController)return void e.utils.warn("HtmlController not available. Include html-controller.js feature.");const s=new e.HtmlController(t,e);e.controllers.set(t,s)}};t.LiveBlade&&t.LiveBlade.registerBinder("html",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={selector:'[data-lb="nav"], [data-lb-nav]',bind(t,e){const{sameOrigin:i}=e.utils,s=s=>{if("keydown"===s.type&&"Enter"!==s.key&&" "!==s.key)return;s.preventDefault();const n=e.resolve(t);if(!n)return;const r=t.dataset.lbFetch||t.getAttribute("href");if(!r||!i(r))return;n.setUrl(r),n.refresh();const a=t.closest(".nav, [data-lb-nav-group]");a&&a.querySelectorAll(".active").forEach(t=>t.classList.remove("active")),t.classList.add("active")};t.addEventListener("click",s),t.addEventListener("keydown",s),t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),t.getAttribute("role")||t.setAttribute("role","button")}};t.LiveBlade&&t.LiveBlade.registerBinder("nav",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={selector:'[data-lb="search"], [data-lb-search]',bind(t,e){const{debounce:i}=e.utils,s=()=>{const i=e.resolve(t);i&&(i.updateParam(t.name||"search",t.value),i.resetPage(),i.refresh())},n=i(s,e.config.debounce);t.addEventListener("input",n),t.addEventListener("keydown",t=>{"Enter"===t.key&&(t.preventDefault(),s())})}};t.LiveBlade&&t.LiveBlade.registerBinder("search",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={selector:['[data-lb="filter"]',"[data-lb-filter]",'[data-lb="select"]','[data-lb="checkbox"]','[data-lb="radio"]','[data-lb="date"]','[data-lb="time"]','[data-lb="datetime-local"]','[data-lb="month"]','[data-lb="week"]','[data-lb="number"]','[data-lb="range"]','[data-lb="color"]'].join(", "),bind(t,e){const{throttle:i}=e.utils,s=i(()=>{const i=e.resolve(t);if(!i)return;const s=t.name||t.dataset.lbParam||"filter";let n;n="checkbox"===t.type?t.checked?"on"!==t.value?t.value:"1":"":"radio"===t.type?t.checked?t.value:"":t.value,i.updateParam(s,n),i.resetPage(),i.refresh()},e.config.throttle);t.addEventListener("change",s)}};t.LiveBlade&&t.LiveBlade.registerBinder("filter",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={selector:"[data-lb-sort]",bind(t,e){const i=()=>{const i=e.resolve(t);if(!i)return;const s=t.dataset.lbSort,n=i.params.sort===s&&"asc"===i.params.dir?"desc":"asc";i.updateParam("sort",s),i.updateParam("dir",n),i.resetPage();const r=t.closest("table");r&&r.querySelectorAll("[data-lb-sort]").forEach(t=>{t.removeAttribute("aria-sort"),t.classList.remove("lb-sort-asc","lb-sort-desc")}),t.setAttribute("aria-sort","asc"===n?"ascending":"descending"),t.classList.add("asc"===n?"lb-sort-asc":"lb-sort-desc"),i.refresh()};t.addEventListener("click",i),t.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),i())}),t.style.cursor="pointer",t.getAttribute("tabindex")||t.setAttribute("tabindex","0")}};t.LiveBlade&&t.LiveBlade.registerBinder("sort",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={selector:'[data-lb="button"], [data-lb-button], [data-lb-action="refresh"], [data-lb-action="load-more"], [data-lb-action="more"]',bind(t,e){const{sameOrigin:i}=e.utils;t.addEventListener("click",s=>{s.preventDefault();const n=e.resolve(t),r=t.dataset.lbAction;if("refresh"===r&&n)return void n.refresh();if(("load-more"===r||"more"===r)&&n)return void n.loadMore();const a=t.dataset.lbFetch;a&&i(a)&&n&&(n.setUrl(a),n.refresh())})}};t.LiveBlade&&t.LiveBlade.registerBinder("button",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={selector:'[data-lb="toggle-update"], [data-lb-toggle]',bind(e,i){const{sameOrigin:s,error:n}=i.utils,r=i.config;e.addEventListener("change",async()=>{const a=e.dataset.lbFetch||e.dataset.lbToggle;if(!a||!s(a))return;if(e.dataset.lbConfirm&&!t.confirm(e.dataset.lbConfirm))return void(e.checked=!e.checked);const o=e.closest(".form-check, .form-switch, .lb-toggle"),l=!e.checked;o&&o.classList.add("lb-updating"),e.disabled=!0;try{const t=await fetch(a,{method:e.dataset.lbMethod||"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":i.getCsrf(),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({[e.name||"value"]:e.checked?1:0}),credentials:"same-origin"});if(!t.ok)throw new Error(`HTTP ${t.status}`);e.disabled=!1,o&&(o.classList.remove("lb-updating"),o.classList.add("lb-success"),setTimeout(()=>o.classList.remove("lb-success"),r.successDuration));const s=i.resolve(e);s&&"false"!==e.dataset.lbRefresh&&s.refresh(),i.emit("toggle:success",{el:e,checked:e.checked})}catch(t){e.checked=l,e.disabled=!1,o&&(o.classList.remove("lb-updating"),o.classList.add("lb-error"),setTimeout(()=>o.classList.remove("lb-error"),r.errorDuration)),n("Toggle failed:",t),i.emit("toggle:error",{el:e,error:t})}})}};t.LiveBlade&&t.LiveBlade.registerBinder("toggle",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={selector:'[data-lb="data"], [data-lb-data]',bind(t,e){const{sameOrigin:i}=e.utils,s=t.dataset.lbFetch||t.dataset.lbData;if(!s||!i(s))return;const n=async()=>{try{const i=await fetch(s,{headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":e.getCsrf(),Accept:"application/json"},credentials:"same-origin"});if(!i.ok)throw new Error(`HTTP ${i.status}`);const n=await i.json(),r=n?.value??n?.count??n?.total??Object.values(n||{}).find(t=>"number"==typeof t||"string"==typeof t);void 0!==r&&(t.textContent=r,t.classList.remove("lb-data-error")),e.emit("data:updated",{el:t,data:n})}catch(i){t.classList.add("lb-data-error"),t.textContent||(t.textContent="â€”"),e.emit("data:error",{el:t,error:i})}};n();const r=parseInt(t.dataset.lbInterval,10);r>0&&(t._lbDataTimer=setInterval(n,1e3*r))}};t.LiveBlade&&t.LiveBlade.registerBinder("data",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t){"use strict";const e={selector:'[data-lb="pagination"], [data-lb-pagination]',bind(t,e){const{sameOrigin:i}=e.utils;t.addEventListener("click",s=>{let n=s.target;if("A"!==n.tagName&&(n=n.closest("a")),!n?.href||"#"===n.href||n.classList.contains("disabled"))return;s.preventDefault(),s.stopPropagation();const r=e.resolve(t);r&&i(n.href)&&(r.setUrl(n.href),r.navigate())})}};t.LiveBlade&&t.LiveBlade.registerBinder("pagination",e),"undefined"!=typeof module&&module.exports&&(module.exports=e)}(window),function(t,e){"use strict";function i(t){return t.title??t.text??t.name??t.label??""}function s(t){return t.subtitle??t.description??t.email??""}function n(t){const e=i(t),n=s(t);let r='<div class="lb-qs-content">';return r+=`<div class="lb-qs-title">${a(e)}</div>`,n&&(r+=`<div class="lb-qs-subtitle">${a(n)}</div>`),r+="</div>",r}function r(t){const e=i(t),n=s(t),r=function(t){return t.picture??t.avatar??t.image??t.img??""}(t),o=e.split(" ").map(t=>t[0]).join("").substring(0,2).toUpperCase();let l;return l=r?`<img src="${a(r)}" alt="" class="lb-qs-picture">`:`<div class="lb-qs-picture lb-qs-initials">${o}</div>`,`\n            ${l}\n            <div class="lb-qs-content">\n                <div class="lb-qs-title">${a(e)}</div>\n                ${n?`<div class="lb-qs-subtitle">${a(n)}</div>`:""}\n            </div>\n        `}function a(t){return null==t?"":String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function o(t,i){this.input=t,this.LiveBlade=i,this.url=t.dataset.lbQuickSearch,this.targetSelector=t.dataset.lbTarget,this.target=e.querySelector(this.targetSelector),this.minChars=parseInt(t.dataset.lbMin,10)||1,this.delay=parseInt(t.dataset.lbDelay,10)||300,this.paramName=t.dataset.lbParam||"q",this.hiddenSelector=t.dataset.lbHidden,this.displayProp=t.dataset.lbDisplay||"title",this.template=t.dataset.lbTemplate||"default",this.abortController=null,this.debounceTimer=null,this.selectedIndex=-1,this.items=[],this.isOpen=!1,this._init()}o.prototype._init=function(){if(this.target){if(this.target.classList.add("lb-quick-search-results"),this.input.classList.add("lb-quick-search-input"),!this.input.parentElement.classList.contains("lb-quick-search-wrapper")){const t=e.createElement("div");t.className="lb-quick-search-wrapper",this.input.parentNode.insertBefore(t,this.input),t.appendChild(this.input),t.appendChild(this.target)}this.input.addEventListener("input",this._onInput.bind(this)),this.input.addEventListener("keydown",this._onKeydown.bind(this)),this.input.addEventListener("focus",this._onFocus.bind(this)),this.input.addEventListener("blur",this._onBlur.bind(this)),this.target.addEventListener("mousedown",this._onResultClick.bind(this)),this.input.setAttribute("role","combobox"),this.input.setAttribute("aria-autocomplete","list"),this.input.setAttribute("aria-expanded","false"),this.target.setAttribute("role","listbox")}else this.LiveBlade.utils.warn("Quick Search: Target not found:",this.targetSelector)},o.prototype._onInput=function(t){const e=t.target.value.trim();this._clearHidden(),e.length<this.minChars?this._hideResults():(clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>this._search(e),this.delay))},o.prototype._onKeydown=function(t){if(this.isOpen)switch(t.key){case"ArrowDown":t.preventDefault(),this._navigate(1);break;case"ArrowUp":t.preventDefault(),this._navigate(-1);break;case"Enter":t.preventDefault(),this.selectedIndex>=0&&this._selectItem(this.items[this.selectedIndex]);break;case"Escape":t.preventDefault(),this._hideResults();break;case"Tab":this._hideResults()}else"ArrowDown"===t.key&&this.input.value.length>=this.minChars&&this._search(this.input.value.trim())},o.prototype._onFocus=function(){this.items.length>0&&this.input.value.length>=this.minChars&&this._showResults()},o.prototype._onBlur=function(){setTimeout(()=>this._hideResults(),150)},o.prototype._onResultClick=function(t){const e=t.target.closest(".lb-qs-item");if(!e)return;t.preventDefault();const i=parseInt(e.dataset.index,10);this.items[i]&&this._selectItem(this.items[i])},o.prototype._search=async function(e){this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const i=new URL(this.url,t.location.href);i.searchParams.set(this.paramName,e),this.input.classList.add("lb-qs-loading");try{const t=await fetch(i.toString(),{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":this.LiveBlade.getCsrf()},credentials:"same-origin",signal:this.abortController.signal});if(!t.ok)throw new Error(`HTTP ${t.status}`);const s=await t.json();this.items=Array.isArray(s)?s:s.data??s.results??s.items??[],this._renderResults(),this._showResults(),this.LiveBlade.emit("quicksearch:results",{input:this.input,query:e,items:this.items})}catch(t){if("AbortError"===t.name)return;this.LiveBlade.utils.error("Quick Search error:",t),this._hideResults()}finally{this.input.classList.remove("lb-qs-loading")}},o.prototype._renderResults=function(){if(0===this.items.length)return void(this.target.innerHTML='<div class="lb-qs-empty">No results found</div>');const t="avatar"===this.template?r:n;this.target.innerHTML=this.items.map((e,i)=>{const s=t(e);return`\n                <div class="lb-qs-item" data-index="${i}" data-id="${a(e.id??"")}" role="option">\n                    ${s}\n                </div>\n            `}).join(""),this.selectedIndex=-1},o.prototype._navigate=function(t){const e=this.target.querySelectorAll(".lb-qs-item");if(0===e.length)return;this.selectedIndex>=0&&e[this.selectedIndex]&&e[this.selectedIndex].classList.remove("lb-qs-active"),this.selectedIndex+=t,this.selectedIndex<0&&(this.selectedIndex=e.length-1),this.selectedIndex>=e.length&&(this.selectedIndex=0);const i=e[this.selectedIndex];i.classList.add("lb-qs-active"),i.scrollIntoView({block:"nearest"}),this.input.setAttribute("aria-activedescendant",`lb-qs-item-${this.selectedIndex}`)},o.prototype._selectItem=function(t){const i=t[this.displayProp]??t.title??t.text??t.name??t.label??"";if(this.input.value=i,this.hiddenSelector){const i=e.querySelector(this.hiddenSelector);i&&(i.value=t.id??"")}this._hideResults(),this.LiveBlade.emit("quicksearch:select",{input:this.input,item:t}),this.input.dispatchEvent(new CustomEvent("lb:quicksearch:select",{detail:{item:t},bubbles:!0}))},o.prototype._showResults=function(){(0!==this.items.length||this.target.innerHTML)&&(this.target.classList.add("lb-qs-open"),this.input.setAttribute("aria-expanded","true"),this.isOpen=!0)},o.prototype._hideResults=function(){this.target.classList.remove("lb-qs-open"),this.input.setAttribute("aria-expanded","false"),this.isOpen=!1,this.selectedIndex=-1},o.prototype._clearHidden=function(){if(this.hiddenSelector){const t=e.querySelector(this.hiddenSelector);t&&(t.value="")}},o.prototype.clear=function(){this.input.value="",this._clearHidden(),this._hideResults(),this.items=[]};const l={init(t){t.QuickSearchController=o}},c={selector:"[data-lb-quick-search]",bind(t,e){t._lbQuickSearch||(t._lbQuickSearch=new o(t,e))}};t.LiveBlade&&(t.LiveBlade.registerFeature("quick-search",l),t.LiveBlade.registerBinder("quick-search",c)),"undefined"!=typeof module&&module.exports&&(module.exports={QuickSearchController:o,QuickSearchFeature:l,QuickSearchBinder:c})}(window,document),function(t,e){"use strict";function i(t,i){this.parent=t,this.LiveBlade=i,this.urlTemplate=t.dataset.lbFetch,this.targetSelector=t.dataset.lbTarget,this.child=e.querySelector(this.targetSelector),this.placeholder=t.dataset.lbPlaceholder||"Select...",this.loadingText=t.dataset.lbLoading||"Loading...",this.errorText=t.dataset.lbError||"Error loading options",this.valueField=t.dataset.lbValueField||"id",this.textField=t.dataset.lbTextField||"name",this.preselectedValue=t.dataset.lbSelected||null,this.abortController=null,this.originalPlaceholder=null,this.cache={},this._init()}i.prototype._init=function(){this.child?this.urlTemplate?(this.child.options.length>0&&""===this.child.options[0].value?this.originalPlaceholder=this.child.options[0].text:this.originalPlaceholder=this.placeholder,this.parent.value?this._loadOptions(this.parent.value):this._resetChild(),this.parent.addEventListener("change",this._onChange.bind(this))):console.warn("LiveBlade Cascade: data-lb-fetch is required"):console.warn("LiveBlade Cascade: Target not found:",this.targetSelector)},i.prototype._onChange=function(t){const e=t.target.value;e?this._loadOptions(e):this._resetChild()},i.prototype._loadOptions=async function(t){if(this.cache[t])return void this._populateOptions(this.cache[t]);this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const e=this.urlTemplate.replace("{value}",encodeURIComponent(t));this._setLoading(!0),this._emit("lb:cascade:loading",{parent:this.parent,child:this.child,value:t});try{const i=await fetch(e,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":this.LiveBlade.getCsrf()},credentials:"same-origin",signal:this.abortController.signal});if(!i.ok)throw new Error(`HTTP ${i.status}`);const s=await i.json(),n=Array.isArray(s)?s:s.data??s.options??s.items??[];this.cache[t]=n,this._populateOptions(n),this._emit("lb:cascade:loaded",{parent:this.parent,child:this.child,value:t,options:n})}catch(t){if("AbortError"===t.name)return;console.error("LiveBlade Cascade error:",t),this._setError(),this._emit("lb:cascade:error",{parent:this.parent,child:this.child,error:t})}},i.prototype._populateOptions=function(t){this.child.innerHTML="";const i=e.createElement("option");i.value="",i.textContent=this.originalPlaceholder,this.child.appendChild(i),t.forEach(t=>{const i=e.createElement("option");i.value=t[this.valueField]??t.id??t.value??"",i.textContent=t[this.textField]??t.name??t.text??t.label??"",this.preselectedValue&&i.value===this.preselectedValue&&(i.selected=!0,this.preselectedValue=null),this.child.appendChild(i)}),this.child.disabled=!1,this.child.classList.remove("lb-cascade-loading","lb-cascade-error"),this.child.value&&this.child.dispatchEvent(new Event("change",{bubbles:!0}))},i.prototype._resetChild=function(){this.child.innerHTML="";const t=e.createElement("option");t.value="",t.textContent=this.originalPlaceholder,this.child.appendChild(t),this.child.disabled=!0,this.child.classList.remove("lb-cascade-loading","lb-cascade-error"),this._emit("lb:cascade:reset",{parent:this.parent,child:this.child}),void 0!==this.child.dataset.lbCascade&&this.child.dispatchEvent(new Event("change",{bubbles:!0}))},i.prototype._setLoading=function(t){if(t){this.child.disabled=!0,this.child.classList.add("lb-cascade-loading"),this.child.classList.remove("lb-cascade-error"),this.child.innerHTML="";const t=e.createElement("option");t.value="",t.textContent=this.loadingText,this.child.appendChild(t)}},i.prototype._setError=function(){this.child.disabled=!0,this.child.classList.remove("lb-cascade-loading"),this.child.classList.add("lb-cascade-error"),this.child.innerHTML="";const t=e.createElement("option");t.value="",t.textContent=this.errorText,this.child.appendChild(t)},i.prototype._emit=function(t,e){this.parent.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0})),this.child.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0}))},i.prototype.clearCache=function(){this.cache={}},i.prototype.reload=function(){const t=this.parent.value;t&&(delete this.cache[t],this._loadOptions(t))};const s={init(t){t.CascadeController=i}},n={selector:"[data-lb-cascade]",bind(t,e){t._lbCascade||(t._lbCascade=new i(t,e))}};t.LiveBlade&&(t.LiveBlade.registerFeature("cascade",s),t.LiveBlade.registerBinder("cascade",n)),"undefined"!=typeof module&&module.exports&&(module.exports={CascadeController:i,CascadeFeature:s,CascadeBinder:n})}(window,document),function(t,e){"use strict";const i='\n        <div class="lb-confirm-overlay" role="dialog" aria-modal="true" aria-labelledby="lb-confirm-title">\n            <div class="lb-confirm-dialog">\n                <div class="lb-confirm-header">\n                    <h4 id="lb-confirm-title" class="lb-confirm-title"></h4>\n                </div>\n                <div class="lb-confirm-body">\n                    <p class="lb-confirm-message"></p>\n                </div>\n                <div class="lb-confirm-footer">\n                    <button type="button" class="lb-confirm-btn lb-confirm-btn-cancel"></button>\n                    <button type="button" class="lb-confirm-btn lb-confirm-btn-yes"></button>\n                </div>\n            </div>\n        </div>\n    ';let s=null,n=null;function r(t,r){const o=function(){if(s)return s;const t=e.createElement("div");t.innerHTML=i.trim(),s=t.firstChild,e.body.appendChild(s);const n=s.querySelector(".lb-confirm-btn-cancel"),r=s.querySelector(".lb-confirm-btn-yes"),o=s;return n.addEventListener("click",()=>a(!1)),r.addEventListener("click",()=>a(!0)),o.addEventListener("click",t=>{t.target===o&&a(!1)}),e.addEventListener("keydown",t=>{"Escape"===t.key&&s.classList.contains("lb-confirm-show")&&a(!1)}),s}();n=r,o.querySelector(".lb-confirm-title").textContent=t.title||"Confirm",o.querySelector(".lb-confirm-message").textContent=t.message,o.querySelector(".lb-confirm-btn-cancel").textContent=t.cancelText||"Cancel",o.querySelector(".lb-confirm-btn-yes").textContent=t.confirmText||"Yes",o.classList.add("lb-confirm-show"),o.querySelector(".lb-confirm-btn-yes").focus(),e.body.style.overflow="hidden"}function a(t){s&&(s.classList.remove("lb-confirm-show"),e.body.style.overflow="",n&&(n(t),n=null))}const o={selector:"[data-lb-confirm]",bind(i,s){i._lbConfirm||(i._lbConfirm=!0,i.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),async function(i,s){const n=i.dataset.lbConfirm,a=i.dataset.lbFetch||i.getAttribute("href"),o=(i.dataset.lbMethod||"POST").toUpperCase(),l=i.dataset.lbTarget,c=i.dataset.lbConfirmTitle,d=i.dataset.lbConfirmYes,h=i.dataset.lbConfirmNo,u=new CustomEvent("lb:confirm:show",{detail:{element:i,message:n},bubbles:!0,cancelable:!0});i.dispatchEvent(u),u.defaultPrevented||r({title:c,message:n,confirmText:d,cancelText:h},async n=>{if(n){if(i.dispatchEvent(new CustomEvent("lb:confirm:confirmed",{detail:{element:i,url:a,method:o},bubbles:!0})),a)if("GET"!==o||i.dataset.lbFetch||!i.getAttribute("href")){i.classList.add("lb-confirm-loading"),i.textContent,i.disabled=!0;try{const t=await fetch(a,{method:o,headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":s.getCsrf()},credentials:"same-origin"});if(!t.ok)throw new Error(`HTTP ${t.status}`);const n=await t.json();if(i.classList.remove("lb-confirm-loading"),i.classList.add("lb-confirm-success"),i.dispatchEvent(new CustomEvent("lb:confirm:success",{detail:{element:i,data:n},bubbles:!0})),l){const t=e.querySelector(l),n=i.dataset.lbAction||"refresh";if(t)switch(n){case"hide":t.style.transition="opacity .25s ease",t.style.opacity="0",setTimeout(()=>t.remove(),250);break;case"remove":t.remove();break;case"refresh":s.refresh&&s.refresh(l)}}setTimeout(()=>{i.classList.remove("lb-confirm-success"),i.disabled=!1},1500)}catch(t){console.error("Confirm action error:",t),i.classList.remove("lb-confirm-loading"),i.classList.add("lb-confirm-error"),i.disabled=!1,i.dispatchEvent(new CustomEvent("lb:confirm:error",{detail:{element:i,error:t},bubbles:!0})),setTimeout(()=>{i.classList.remove("lb-confirm-error")},2e3)}}else t.location.href=i.getAttribute("href")}else i.dispatchEvent(new CustomEvent("lb:confirm:cancel",{detail:{element:i},bubbles:!0}))})}(i,s)}))}},l={init(t){t.confirm=function(t,e={}){return new Promise(i=>{r({message:t,title:e.title,confirmText:e.confirmText||e.yes,cancelText:e.cancelText||e.no},i)})}}};t.LiveBlade&&(t.LiveBlade.registerFeature("confirm",l),t.LiveBlade.registerBinder("confirm",o)),"undefined"!=typeof module&&module.exports&&(module.exports={ConfirmFeature:l,ConfirmBinder:o})}(window,document),function(t){"use strict";function e(t,e){this.container=t,this.LiveBlade=e,this.value=parseFloat(t.dataset.lbValue)||0,this.max=parseInt(t.dataset.lbMax,10)||5,this.url=t.dataset.lbFetch,this.paramName=t.dataset.lbParam||"rating",this.readonly=t.hasAttribute("data-lb-readonly"),this.allowHalf=t.hasAttribute("data-lb-half"),this.size=t.dataset.lbSize||"md",this.hoverValue=null,this._init()}e.prototype._init=function(){this.container.classList.add("lb-rating"),this.container.classList.add("lb-rating-"+this.size),this.readonly&&this.container.classList.add("lb-rating-readonly"),this._render(),this.readonly||(this.container.addEventListener("mousemove",this._onMouseMove.bind(this)),this.container.addEventListener("mouseleave",this._onMouseLeave.bind(this)),this.container.addEventListener("click",this._onClick.bind(this)),this.container.addEventListener("keydown",this._onKeyDown.bind(this)),this.container.setAttribute("tabindex","0"),this.container.setAttribute("role","slider"),this.container.setAttribute("aria-valuemin","0"),this.container.setAttribute("aria-valuemax",this.max.toString()),this.container.setAttribute("aria-valuenow",this.value.toString()),this.container.setAttribute("aria-label","Rating"))},e.prototype._render=function(){const t=null!==this.hoverValue?this.hoverValue:this.value;let e="";for(let i=1;i<=this.max;i++){const s="lb-rating-star";let n;n=t>=i?'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>':this.allowHalf&&t>=i-.5?'<svg viewBox="0 0 24 24"><defs><linearGradient id="half"><stop offset="50%" stop-color="currentColor"/><stop offset="50%" stop-color="transparent"/></linearGradient></defs><path fill="url(#half)" stroke="currentColor" stroke-width="2" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>':'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>',e+=`<span class="${s}" data-value="${i}">${n}</span>`}this.container.innerHTML=e},e.prototype._getValueFromEvent=function(t){const e=t.target.closest(".lb-rating-star");if(!e)return null;let i=parseInt(e.dataset.value,10);if(this.allowHalf){const s=e.getBoundingClientRect();t.clientX-s.left<s.width/2&&(i-=.5)}return i},e.prototype._onMouseMove=function(t){const e=this._getValueFromEvent(t);null!==e&&e!==this.hoverValue&&(this.hoverValue=e,this._render())},e.prototype._onMouseLeave=function(){this.hoverValue=null,this._render()},e.prototype._onClick=function(t){const e=this._getValueFromEvent(t);null!==e&&this._setValue(e)},e.prototype._onKeyDown=function(t){let e=this.value;const i=this.allowHalf?.5:1;switch(t.key){case"ArrowRight":case"ArrowUp":t.preventDefault(),e=Math.min(this.max,this.value+i);break;case"ArrowLeft":case"ArrowDown":t.preventDefault(),e=Math.max(0,this.value-i);break;case"Home":t.preventDefault(),e=0;break;case"End":t.preventDefault(),e=this.max;break;default:return}e!==this.value&&this._setValue(e)},e.prototype._setValue=async function(t){const e=this.value;this.value=t,this.hoverValue=null,this._render(),this.container.setAttribute("aria-valuenow",t.toString()),this.container.dataset.lbValue=t.toString();const i=new CustomEvent("lb:rating:change",{detail:{element:this.container,value:t,oldValue:e},bubbles:!0,cancelable:!0});if(this.container.dispatchEvent(i),i.defaultPrevented)return this.value=e,void this._render();this.url&&await this._postRating(t,e)},e.prototype._postRating=async function(t,e){this.container.classList.add("lb-rating-loading");try{const e={};e[this.paramName]=t;const i=await fetch(this.url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":this.LiveBlade.getCsrf()},credentials:"same-origin",body:JSON.stringify(e)});if(!i.ok)throw new Error(`HTTP ${i.status}`);const s=await i.json();this.container.classList.remove("lb-rating-loading"),this.container.classList.add("lb-rating-success"),this.container.dispatchEvent(new CustomEvent("lb:rating:success",{detail:{element:this.container,value:t,data:s},bubbles:!0})),setTimeout(()=>{this.container.classList.remove("lb-rating-success")},1e3)}catch(t){console.error("Rating error:",t),this.value=e,this._render(),this.container.classList.remove("lb-rating-loading"),this.container.classList.add("lb-rating-error"),this.container.dispatchEvent(new CustomEvent("lb:rating:error",{detail:{element:this.container,error:t},bubbles:!0})),setTimeout(()=>{this.container.classList.remove("lb-rating-error")},2e3)}},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this._setValue(t)};const i={selector:"[data-lb-rating]",bind(t,i){t._lbRating||(t._lbRating=new e(t,i))}},s={init(t){t.RatingController=e}};t.LiveBlade&&(t.LiveBlade.registerFeature("rating",s),t.LiveBlade.registerBinder("rating",i)),"undefined"!=typeof module&&module.exports&&(module.exports={RatingController:e,RatingFeature:s,RatingBinder:i})}(window,document),function(t,e){"use strict";function i(t,i){this.input=t,this.LiveBlade=i,this.type=t.dataset.lbCounter||"chars",""!==this.type&&"true"!==this.type||(this.type="chars"),this.max=t.dataset.lbMax?parseInt(t.dataset.lbMax,10):null,this.min=t.dataset.lbMin?parseInt(t.dataset.lbMin,10):null,this.warn=t.dataset.lbWarn?parseInt(t.dataset.lbWarn,10):null,this.targetSelector=t.dataset.lbTarget,this.format=t.dataset.lbFormat||"fraction",this.blockInput=t.hasAttribute("data-lb-block"),this.target=e.querySelector(this.targetSelector),this.lastCount=0,this._init()}i.prototype._init=function(){this.target?(this.input.classList.add("lb-counter-input"),this._update(),this.input.addEventListener("input",this._onInput.bind(this)),this.input.addEventListener("paste",()=>setTimeout(()=>this._onInput(),0)),this.blockInput&&this.max&&"chars"===this.type&&this.input.addEventListener("keypress",this._onKeyPress.bind(this))):console.warn("LiveBlade Counter: Target not found:",this.targetSelector)},i.prototype._getCount=function(){const t=this.input.value;if("words"===this.type){const e=t.trim().split(/\s+/).filter(t=>t.length>0);return""===t.trim()?0:e.length}return t.length},i.prototype._onInput=function(){this._update()},i.prototype._onKeyPress=function(t){if(this.max&&this._getCount()>=this.max){if(t.ctrlKey||t.metaKey||"Backspace"===t.key||"Delete"===t.key)return;t.preventDefault()}},i.prototype._update=function(){const t=this._getCount(),e=this.lastCount>this.max,i=this.max&&t>this.max,s=this.min&&t<this.min,n=this.warn&&t>=this.warn,r=this.max&&t>=this.max;this._updateDisplay(t),this._updateClasses(t,i,s,n,r),t!==this.lastCount&&(this._emit("lb:counter:update",{count:t,max:this.max,type:this.type}),r&&!e&&this._emit("lb:counter:max",{count:t}),n&&this.lastCount<this.warn&&this._emit("lb:counter:warn",{count:t,warn:this.warn}),i||s?this._emit("lb:counter:invalid",{count:t,max:this.max,min:this.min}):!(e||this.min&&this.lastCount<this.min)||i||s||this._emit("lb:counter:valid",{count:t})),this.lastCount=t},i.prototype._updateDisplay=function(t){let e;const i="words"===this.type?"words":"characters";switch(this.format){case"remaining":if(this.max){const s=this.max-t;e=s>=0?`${s} ${i} remaining`:`${Math.abs(s)} ${i} over limit`}else e=`${t} ${i}`;break;case"count":e=t.toString();break;default:e=this.max?`${t}/${this.max}`:`${t} ${i}`}this.target.textContent=e},i.prototype._updateClasses=function(t,e,i,s,n){this.input.classList.toggle("lb-counter-warn",s&&!e),this.input.classList.toggle("lb-counter-error",e||i),this.input.classList.toggle("lb-counter-max",n&&!e),this.target.classList.toggle("lb-counter-warn",s&&!e),this.target.classList.toggle("lb-counter-error",e||i),this.target.classList.toggle("lb-counter-max",n&&!e)},i.prototype._emit=function(t,e){this.input.dispatchEvent(new CustomEvent(t,{detail:{element:this.input,target:this.target,...e},bubbles:!0}))},i.prototype.getCount=function(){return this._getCount()},i.prototype.isValid=function(){const t=this._getCount();return!(this.max&&t>this.max)&&!(this.min&&t<this.min)};const s={selector:"[data-lb-counter]",bind(t,e){t._lbCounter||(t._lbCounter=new i(t,e))}},n={init(t){t.CounterController=i}};t.LiveBlade&&(t.LiveBlade.registerFeature("counter",n),t.LiveBlade.registerBinder("counter",s)),"undefined"!=typeof module&&module.exports&&(module.exports={CounterController:i,CounterFeature:n,CounterBinder:s})}(window,document);