/*!
 * LiveBlade v1.0.1
 * Production-ready AJAX for Laravel Blade
 * @license MIT
 *
 * Included:
 *   - core
 *   - html-controller
 *   - rate-limiter
 *   - state
 *   - html
 *   - nav
 *   - search
 *   - filter
 *   - sort
 *   - button
 *   - toggle
 *   - data
 *   - pagination
 *   - quick-search
 *   - cascade
 *   - confirm
 *   - rating
 *   - word-counter
 *   - forms
 */
!function(e,t){"use strict";if(e.LiveBlade)return;const s="1.0.1",i="1"===localStorage.getItem("lb_debug");function r(...e){i&&console.log("[LiveBlade]",...e)}function n(...e){console.warn("[LiveBlade]",...e)}function a(...e){console.error("[LiveBlade]",...e)}let o=0;const l={version:s,controllers:new WeakMap,instances:new Set,config:{debounce:300,throttle:100,retryDelay:2e3,maxRetries:3,requestTimeout:3e4,skeletonHTML:null,errorHTML:null,successDuration:1500,errorDuration:3e3,updateUrl:!1,updateUrlMode:"push",preserveScroll:!0,preserveInputs:!0,preserveFocus:!0,smartUpdate:!0,contentHashLength:500},csrf:null,_events:Object.create(null),_features:Object.create(null),_binders:Object.create(null),_initialized:!1};var c;l.utils={log:r,warn:n,error:a,escapeHtml:e=>null==e?"":String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),cssEscape:e=>null==e?"":"undefined"!=typeof CSS&&CSS.escape?CSS.escape(e):String(e).replace(/([^\w-])/g,"\\$1"),sameOrigin:function(t){try{return new URL(t,e.location.href).origin===e.location.origin}catch{return!1}},uniqueId:function(e="lb"){return`${e}_${++o}_${Date.now().toString(36)}`},debounce:function(e,t){let s;return function(...i){clearTimeout(s),s=setTimeout(()=>e.apply(this,i),t)}},throttle:function(e,t){let s;return function(...i){s||(e.apply(this,i),s=!0,setTimeout(()=>s=!1,t))}},parseUrl:function(t){try{const s=new URL(t,e.location.href);return{path:s.pathname,params:Object.fromEntries(s.searchParams.entries()),hash:s.hash}}catch{return{path:"/",params:{},hash:""}}},buildUrl:function(t,s,i=""){const r=new URL(t,e.location.href);return r.search="",Object.entries(s).forEach(([e,t])=>{null!=t&&""!==t&&r.searchParams.set(e,t)}),r.pathname+r.search+(i||"")}},l.refreshCsrf=function(){return this.csrf=t.querySelector('meta[name="csrf-token"]')?.content||"",this.csrf||n("CSRF token not found."),this},l.getCsrf=function(){return this.csrf||this.refreshCsrf(),this.csrf},l.on=function(e,t){return"function"!=typeof t||(this._events[e]||=[]).push(t),this},l.off=function(e,t){return this._events[e]?(t?this._events[e]=this._events[e].filter(e=>e!==t):delete this._events[e],this):this},l.emit=function(e,t){return(this._events[e]||[]).forEach(e=>{try{e(t)}catch(e){a("Event listener error:",e)}}),this},l.once=function(e,t){const s=i=>{this.off(e,s),t(i)};return this.on(e,s)},l.use=function(e,t={}){return"function"==typeof e?e(this,t):e?.install&&e.install(this,t),this},l.registerFeature=function(e,t){return this._features[e]?(n(`Feature "${e}" already registered.`),this):(this._features[e]=t,"function"==typeof t.init&&t.init(this),r(`Feature "${e}" registered.`),this)},l.hasFeature=function(e){return!!this._features[e]},l.registerBinder=function(e,t){return this._binders[e]?(n(`Binder "${e}" already registered.`),this):(this._binders[e]=t,r(`Binder "${e}" registered.`),this)},l.resolve=function(e){if(!e)return null;const s=e.getAttribute("data-lb-target");if(s){const e=t.querySelector(s);return e?l.controllers.get(e):null}const i=e.closest('[data-lb="html"], [data-lb-html], [data-lb-container]');return i?l.controllers.get(i):null},l.bind=function(e=t){return Object.entries(this._binders).forEach(([t,s])=>{if(!s.selector)return;e.querySelectorAll(`${s.selector}:not([data-lb-bound~="${t}"])`).forEach(e=>{try{s.bind(e,this);const i=e.getAttribute("data-lb-bound")||"";e.setAttribute("data-lb-bound",(i+" "+t).trim())}catch(e){a(`Binder "${t}" error:`,e)}})}),this},l.refresh=function(e){if("string"==typeof e){const s=l.controllers.get(t.querySelector(e));s&&s.refresh()}else if(e instanceof HTMLElement){const t=l.controllers.get(e);t&&t.refresh()}else l.instances.forEach(e=>e.refresh());return this},l.cleanup=function(e=t){return e.querySelectorAll("[data-lb-bound]").forEach(e=>{const t=l.controllers.get(e);t?.dispose&&t.dispose(),l.controllers.delete(e),e.removeAttribute("data-lb-bound"),e._lbDataTimer&&(clearInterval(e._lbDataTimer),delete e._lbDataTimer)}),this},l.configure=function(e){return e&&"object"==typeof e&&Object.assign(l.config,e),this},l.debug=function(e=!0){return localStorage.setItem("lb_debug",e?"1":"0"),console.log("[LiveBlade] Debug mode "+(e?"enabled":"disabled")+". Reload page."),this},l.test=function(e){const s="string"==typeof e?t.querySelector(e):e;if(!s)return console.log("âŒ Not found:",e),null;console.log("âœ… Found:",s);const i=l.resolve(s);return i&&console.log("ðŸŽ® Controller:",i.id,i.getUrl()),{el:s,ctrl:i}},l.getController=function(e){const s="string"==typeof e?t.querySelector(e):e;return s?l.controllers.get(s):null},l.getAllControllers=()=>Array.from(l.instances),l.init=function(){return this._initialized||(this._initialized=!0,this.refreshCsrf(),t.addEventListener("csrf-token-update",()=>this.refreshCsrf()),this.bind(),r("Initialized v"+s),this.emit("init")),this},c=()=>l.init(),"loading"===t.readyState?t.addEventListener("DOMContentLoaded",c):c(),e.LiveBlade=l}(window,document),function(e){"use strict";function t(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t&=t;return t}function s(e,t){this.el=e,this.LiveBlade=t,this.id=t.utils.uniqueId("ctrl"),this.path="/",this.params={},this.hash="",this.abortController=null,this.timeoutId=null,this.refreshTimer=null,this.requestId=0,this.retryCount=0,this.lastHTML=null,this._historyInitialized=!1,this._disposed=!1,e.getAttribute("role")||e.setAttribute("role","region"),e.getAttribute("aria-live")||e.setAttribute("aria-live","polite"),t.instances.add(this),this._initFromAttributes()}s.prototype._initFromAttributes=function(){const e=this.el,t=e.getAttribute("data-lb-fetch")||e.getAttribute("data-lb-html")||e.getAttribute("data-lb");t&&"html"!==t&&this.setUrl(t);const s=parseInt(e.getAttribute("data-lb-interval"),10);s>0&&(this.refreshTimer=setInterval(()=>{this._disposed||this.refresh()},1e3*s)),t&&"html"!==t&&this.load(!1,{pushState:!1,isInitial:!0})},s.prototype.setUrl=function(e){const{sameOrigin:t,parseUrl:s}=this.LiveBlade.utils;if(!e||!t(e))return this;const i=s(e);return this.path=i.path,this.params=i.params,this.hash=i.hash,this},s.prototype.updateParam=function(e,t){return null==t||""===t?delete this.params[e]:this.params[e]=String(t),this},s.prototype.updateParams=function(e){return Object.entries(e).forEach(([e,t])=>this.updateParam(e,t)),this},s.prototype.resetPage=function(){return delete this.params.page,this},s.prototype.getUrl=function(){return this.LiveBlade.utils.buildUrl(this.path,this.params,this.hash)},s.prototype.showSkeleton=function(){this.el.innerHTML.trim()||(this.el.innerHTML=this.LiveBlade.config.skeletonHTML||'\n            <div class="lb-skeleton" role="status" aria-label="Loading">\n                <div class="lb-skeleton-line"></div>\n                <div class="lb-skeleton-line" style="width:90%"></div>\n                <div class="lb-skeleton-line" style="width:75%"></div>\n            </div>\n        ')},s.prototype.setLoading=function(e){this.el.classList.toggle("lb-loading",e),this.el.setAttribute("aria-busy",e?"true":"false"),this.LiveBlade.emit(e?"loading:start":"loading:end",{controller:this})},s.prototype.abortPendingRequest=function(){this.abortController&&(this.abortController.abort(),this.abortController=null),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)},s.prototype.load=async function(s=!1,i={}){if(this._disposed)return;const{sameOrigin:r,log:n,escapeHtml:a}=this.LiveBlade.utils,o=this.LiveBlade.config,l=this.getUrl();if(!l||!r(l))return;if(this.LiveBlade.rateLimiter&&!this.LiveBlade.rateLimiter.canRequest(l))return;this.requestId+=1;const c=this.requestId;i.isInitial&&!s&&this.showSkeleton(),this.abortPendingRequest(),this.abortController=new AbortController,this.timeoutId=setTimeout(()=>{this.abortController&&this.abortController.abort()},o.requestTimeout);const d=this.el.innerHTML,u=this.LiveBlade.state?.saveAll(this.el,o);let h,p;this.setLoading(!0),n("Fetching:",l);try{h=await fetch(l,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest","X-LiveBlade":"true",Accept:"application/json, text/html","X-CSRF-TOKEN":this.LiveBlade.getCsrf()},credentials:"same-origin",signal:this.abortController.signal})}catch(e){if(this.timeoutId&&clearTimeout(this.timeoutId),"AbortError"===e.name)return;return void this.handleError(e,l,s)}if(this.timeoutId&&clearTimeout(this.timeoutId),c!==this.requestId)return;try{if(h.redirected)return void(e.location.href=h.url);if(!h.ok)throw new Error(`HTTP ${h.status}`);p=(h.headers.get("content-type")||"").includes("application/json")?await h.json():{html:await h.text(),has_more:!1}}catch(e){return void this.handleError(e,l,s)}finally{this.setLoading(!1)}const b="string"==typeof p.html?p.html:"",m=!!p.has_more,f=s||!o.smartUpdate||function(e,s,i=500){return!(e===s||e&&s&&e.length===s.length&&e.slice(0,i)===s.slice(0,i)&&e.slice(-i)===s.slice(-i)&&t(e)===t(s))}(d,b,o.contentHashLength);if(s?this.el.insertAdjacentHTML("beforeend",b):f&&(this.el.innerHTML=b,this.lastHTML=b),this.el.dataset.lbHasMore=m?"1":"0",this.retryCount=0,f&&this.LiveBlade.bind(this.el),!s&&u&&this.LiveBlade.state?.restoreAll(this.el,u),!s&&i.pushState&&e.history&&o.updateUrl){const t=this.getUrl(),s={liveblade:!0,controllerId:this.id,path:this.path,params:{...this.params}};!this._historyInitialized||i.replaceState||"replace"===o.updateUrlMode?(e.history.replaceState(s,"",t),this._historyInitialized=!0):e.history.pushState(s,"",t)}this.el.dispatchEvent(new CustomEvent("lb:loaded",{detail:{url:l,data:p,append:s},bubbles:!0})),this.LiveBlade.emit("loaded",{controller:this,url:l,data:p,append:s,changed:f})},s.prototype.handleError=function(e,t,s){if(this._disposed||"AbortError"===e.name)return;const{error:i,escapeHtml:r}=this.LiveBlade.utils,n=this.LiveBlade.config;if(i("Request failed:",e.message),this.retryCount<n.maxRetries){this.retryCount++;const e=n.retryDelay*this.retryCount;return void setTimeout(()=>{this._disposed||this.load(s,{})},e)}const a=!1===navigator?.onLine;this.el.innerHTML=function(e,t=!1,s){return`\n            <div class="lb-error" role="alert">\n                <div class="lb-error-icon">\n                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                        <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/>\n                        <line x1="12" y1="16" x2="12.01" y2="16"/>\n                    </svg>\n                </div>\n                <strong>Failed to load content</strong>\n                <p>${t?"You appear to be offline.":s(e)}</p>\n                <button type="button" class="lb-retry-btn" data-lb-action="refresh">\n                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                        <path d="M23 4v6h-6M1 20v-6h6"/>\n                        <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>\n                    </svg>\n                    Try Again\n                </button>\n            </div>\n        `}(e.message,a,r),this.LiveBlade.bind(this.el),this.el.dispatchEvent(new CustomEvent("lb:error",{detail:{error:e,url:t},bubbles:!0})),this.LiveBlade.emit("error",{controller:this,error:e,url:t,offline:a})},s.prototype.refresh=function(){return this.resetPage(),this.load(!1,{pushState:!0})},s.prototype.navigate=function(e){return e&&this.setUrl(e),this.load(!1,{pushState:!0})},s.prototype.loadMore=function(){const e=parseInt(this.params.page||"1",10);return this.params.page=String(e+1),this.load(!0)},s.prototype.dispose=function(){this._disposed||(this._disposed=!0,this.abortPendingRequest(),this.refreshTimer&&clearInterval(this.refreshTimer),this.LiveBlade.instances.delete(this),this.LiveBlade.controllers.delete(this.el),this.el.removeAttribute("data-lb-bound"))};const i={init(t){t.HtmlController=s,e.addEventListener("popstate",s=>{s.state?.liveblade&&t.instances.forEach(t=>{s.state.path?(t.path=s.state.path,t.params={...s.state.params}):t.setUrl(e.location.href),t.load(!1,{pushState:!1})})}),e.addEventListener("online",()=>{t.emit("online"),t.instances.forEach(e=>{e.retryCount>0&&(e.retryCount=0,e.refresh())})}),e.addEventListener("offline",()=>t.emit("offline"))}};e.LiveBlade&&e.LiveBlade.registerFeature("html-controller",i),"undefined"!=typeof module&&module.exports&&(module.exports={HtmlController:s,HtmlControllerFeature:i})}(window,document),function(e){"use strict";const t={requests:new Map,maxRequests:100,windowMs:6e4,cleanupInterval:null,init(e){this.cleanupInterval||(this.cleanupInterval=setInterval(()=>this.cleanup(),this.windowMs),e.rateLimiter=this)},cleanup(){const e=Date.now();for(const[t,s]of this.requests){const i=s.filter(t=>e-t<this.windowMs);0===i.length?this.requests.delete(t):this.requests.set(t,i)}},canRequest(t){const s=Date.now(),i=(this.requests.get(t)||[]).filter(e=>s-e<this.windowMs);return i.length>=this.maxRequests?(e.LiveBlade&&e.LiveBlade.utils.log("Rate limit exceeded:",t),!1):(i.push(s),this.requests.set(t,i),!0)},reset(e){e?this.requests.delete(e):this.requests.clear()}};e.LiveBlade&&e.LiveBlade.registerFeature("rate-limiter",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={init(e){e.state=this},saveScrollPosition:e=>({top:e.scrollTop,left:e.scrollLeft}),restoreScrollPosition(e,t){t&&(e.scrollTop=t.top,e.scrollLeft=t.left)},saveFocusState(e){const t=document.activeElement;return t&&e.contains(t)?{id:t.id,name:t.name,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd}:null},restoreFocusState(t,s){if(!s)return;const i=e.LiveBlade?.utils?.cssEscape||(e=>e);let r=null;if(s.id&&(r=t.querySelector(`#${i(s.id)}`)),!r&&s.name&&(r=t.querySelector(`[name="${i(s.name)}"]`)),r?.focus&&(r.focus(),null!=s.selectionStart&&r.setSelectionRange))try{r.setSelectionRange(s.selectionStart,s.selectionEnd)}catch{}},saveInputStates(t){const s=t.querySelectorAll("input, textarea, select"),i=[],r=e.LiveBlade?.utils?.cssEscape||(e=>e);return s.forEach(e=>{const t=e.id,s=e.name;let n=null;if(t)n=`#${r(t)}`;else if(s){n=`${e.tagName.toLowerCase()}[name="${r(s)}"]`,"radio"===e.type&&(n+=`[value="${r(e.value)}"]`)}if(!n)return;const a={selector:n,tagName:e.tagName};"checkbox"===e.type?(a.type="checkbox",a.checked=e.checked):"radio"===e.type?(a.type="radio",a.checked=e.checked):"SELECT"===e.tagName?(a.type="select",a.value=e.value,a.selectedIndex=e.selectedIndex,e.multiple&&(a.selectedValues=Array.from(e.selectedOptions).map(e=>e.value))):(a.type="text",a.value=e.value),i.push(a)}),i},restoreInputStates(e,t,s=!0){t?.length&&t.forEach(t=>{const i=e.querySelector(t.selector);i&&(s&&document.activeElement===i||("checkbox"===t.type||"radio"===t.type?i.checked=t.checked:"select"===t.type?t.selectedValues&&i.multiple?Array.from(i.options).forEach(e=>{e.selected=t.selectedValues.includes(e.value)}):(i.value=t.value,i.value!==t.value&&t.selectedIndex>=0&&(i.selectedIndex=t.selectedIndex)):i.value=t.value))})},saveAll(e,t={}){return{scroll:!1!==t.preserveScroll?this.saveScrollPosition(e):null,focus:!1!==t.preserveFocus?this.saveFocusState(e):null,inputs:!1!==t.preserveInputs?this.saveInputStates(e):null}},restoreAll(e,t){t&&(this.restoreScrollPosition(e,t.scroll),this.restoreInputStates(e,t.inputs),this.restoreFocusState(e,t.focus))}};e.LiveBlade&&e.LiveBlade.registerFeature("state",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={selector:'[data-lb="html"], [data-lb-html], [data-lb]:not([data-lb="nav"]):not([data-lb="search"]):not([data-lb="filter"]):not([data-lb="button"]):not([data-lb="toggle-update"]):not([data-lb="data"]):not([data-lb="pagination"]):not([data-lb="form"])',bind(e,t){const s=e.getAttribute("data-lb");if(s&&!s.startsWith("/")&&"html"!==s)return;if(t.controllers.has(e))return;if(!t.HtmlController)return void t.utils.warn("HtmlController not available. Include html-controller.js feature.");const i=new t.HtmlController(e,t);t.controllers.set(e,i)}};e.LiveBlade&&e.LiveBlade.registerBinder("html",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={selector:'[data-lb="nav"], [data-lb-nav]',bind(e,t){const{sameOrigin:s}=t.utils,i=i=>{if("keydown"===i.type&&"Enter"!==i.key&&" "!==i.key)return;i.preventDefault();const r=t.resolve(e);if(!r)return;const n=e.dataset.lbFetch||e.getAttribute("href");if(!n||!s(n))return;r.setUrl(n),r.refresh();const a=e.closest(".nav, [data-lb-nav-group]");a&&a.querySelectorAll(".active").forEach(e=>e.classList.remove("active")),e.classList.add("active")};e.addEventListener("click",i),e.addEventListener("keydown",i),e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),e.getAttribute("role")||e.setAttribute("role","button")}};e.LiveBlade&&e.LiveBlade.registerBinder("nav",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={selector:'[data-lb="search"], [data-lb-search]',bind(e,t){const{debounce:s}=t.utils,i=()=>{const s=t.resolve(e);s&&(s.updateParam(e.name||"search",e.value),s.resetPage(),s.refresh())},r=s(i,t.config.debounce);e.addEventListener("input",r),e.addEventListener("keydown",e=>{"Enter"===e.key&&(e.preventDefault(),i())})}};e.LiveBlade&&e.LiveBlade.registerBinder("search",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={selector:['[data-lb="filter"]',"[data-lb-filter]",'[data-lb="select"]','[data-lb="checkbox"]','[data-lb="radio"]','[data-lb="date"]','[data-lb="time"]','[data-lb="datetime-local"]','[data-lb="month"]','[data-lb="week"]','[data-lb="number"]','[data-lb="range"]','[data-lb="color"]'].join(", "),bind(e,t){const{throttle:s}=t.utils,i=s(()=>{const s=t.resolve(e);if(!s)return;const i=e.name||e.dataset.lbParam||"filter";let r;r="checkbox"===e.type?e.checked?"on"!==e.value?e.value:"1":"":"radio"===e.type?e.checked?e.value:"":e.value,s.updateParam(i,r),s.resetPage(),s.refresh()},t.config.throttle);e.addEventListener("change",i)}};e.LiveBlade&&e.LiveBlade.registerBinder("filter",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={selector:"[data-lb-sort]",bind(e,t){const s=()=>{const s=t.resolve(e);if(!s)return;const i=e.dataset.lbSort,r=s.params.sort===i&&"asc"===s.params.dir?"desc":"asc";s.updateParam("sort",i),s.updateParam("dir",r),s.resetPage();const n=e.closest("table");n&&n.querySelectorAll("[data-lb-sort]").forEach(e=>{e.removeAttribute("aria-sort"),e.classList.remove("lb-sort-asc","lb-sort-desc")}),e.setAttribute("aria-sort","asc"===r?"ascending":"descending"),e.classList.add("asc"===r?"lb-sort-asc":"lb-sort-desc"),s.refresh()};e.addEventListener("click",s),e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s())}),e.style.cursor="pointer",e.getAttribute("tabindex")||e.setAttribute("tabindex","0")}};e.LiveBlade&&e.LiveBlade.registerBinder("sort",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={selector:'[data-lb="button"], [data-lb-button], [data-lb-action="refresh"], [data-lb-action="load-more"], [data-lb-action="more"]',bind(e,t){const{sameOrigin:s}=t.utils;e.addEventListener("click",i=>{i.preventDefault();const r=t.resolve(e),n=e.dataset.lbAction;if("refresh"===n&&r)return void r.refresh();if(("load-more"===n||"more"===n)&&r)return void r.loadMore();const a=e.dataset.lbFetch;a&&s(a)&&r&&(r.setUrl(a),r.refresh())})}};e.LiveBlade&&e.LiveBlade.registerBinder("button",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={selector:'[data-lb="toggle-update"], [data-lb-toggle]',bind(t,s){const{sameOrigin:i,error:r}=s.utils,n=s.config;t.addEventListener("change",async()=>{const a=t.dataset.lbFetch||t.dataset.lbToggle;if(!a||!i(a))return;if(t.dataset.lbConfirm&&!e.confirm(t.dataset.lbConfirm))return void(t.checked=!t.checked);const o=t.closest(".form-check, .form-switch, .lb-toggle"),l=!t.checked;o&&o.classList.add("lb-updating"),t.disabled=!0;try{const e=await fetch(a,{method:t.dataset.lbMethod||"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":s.getCsrf(),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({[t.name||"value"]:t.checked?1:0}),credentials:"same-origin"});if(!e.ok)throw new Error(`HTTP ${e.status}`);t.disabled=!1,o&&(o.classList.remove("lb-updating"),o.classList.add("lb-success"),setTimeout(()=>o.classList.remove("lb-success"),n.successDuration));const i=s.resolve(t);i&&"false"!==t.dataset.lbRefresh&&i.refresh(),s.emit("toggle:success",{el:t,checked:t.checked})}catch(e){t.checked=l,t.disabled=!1,o&&(o.classList.remove("lb-updating"),o.classList.add("lb-error"),setTimeout(()=>o.classList.remove("lb-error"),n.errorDuration)),r("Toggle failed:",e),s.emit("toggle:error",{el:t,error:e})}})}};e.LiveBlade&&e.LiveBlade.registerBinder("toggle",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={selector:'[data-lb="data"], [data-lb-data]',bind(e,t){const{sameOrigin:s}=t.utils,i=e.dataset.lbFetch||e.dataset.lbData;if(!i||!s(i))return;const r=async()=>{try{const s=await fetch(i,{headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":t.getCsrf(),Accept:"application/json"},credentials:"same-origin"});if(!s.ok)throw new Error(`HTTP ${s.status}`);const r=await s.json(),n=r?.value??r?.count??r?.total??Object.values(r||{}).find(e=>"number"==typeof e||"string"==typeof e);void 0!==n&&(e.textContent=n,e.classList.remove("lb-data-error")),t.emit("data:updated",{el:e,data:r})}catch(s){e.classList.add("lb-data-error"),e.textContent||(e.textContent="â€”"),t.emit("data:error",{el:e,error:s})}};r();const n=parseInt(e.dataset.lbInterval,10);n>0&&(e._lbDataTimer=setInterval(r,1e3*n))}};e.LiveBlade&&e.LiveBlade.registerBinder("data",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e){"use strict";const t={selector:'[data-lb="pagination"], [data-lb-pagination]',bind(e,t){const{sameOrigin:s}=t.utils;e.addEventListener("click",i=>{let r=i.target;if("A"!==r.tagName&&(r=r.closest("a")),!r?.href||"#"===r.href||r.classList.contains("disabled"))return;i.preventDefault(),i.stopPropagation();const n=t.resolve(e);n&&s(r.href)&&(n.setUrl(r.href),n.navigate())})}};e.LiveBlade&&e.LiveBlade.registerBinder("pagination",t),"undefined"!=typeof module&&module.exports&&(module.exports=t)}(window),function(e,t){"use strict";function s(e){return e.title??e.text??e.name??e.label??""}function i(e){return e.subtitle??e.description??e.email??""}function r(e){const t=s(e),r=i(e);let n='<div class="lb-qs-content">';return n+=`<div class="lb-qs-title">${a(t)}</div>`,r&&(n+=`<div class="lb-qs-subtitle">${a(r)}</div>`),n+="</div>",n}function n(e){const t=s(e),r=i(e),n=function(e){return e.picture??e.avatar??e.image??e.img??""}(e),o=t.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase();let l;return l=n?`<img src="${a(n)}" alt="" class="lb-qs-picture">`:`<div class="lb-qs-picture lb-qs-initials">${o}</div>`,`\n            ${l}\n            <div class="lb-qs-content">\n                <div class="lb-qs-title">${a(t)}</div>\n                ${r?`<div class="lb-qs-subtitle">${a(r)}</div>`:""}\n            </div>\n        `}function a(e){return null==e?"":String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function o(e,s){this.input=e,this.LiveBlade=s,this.url=e.dataset.lbQuickSearch,this.targetSelector=e.dataset.lbTarget,this.target=t.querySelector(this.targetSelector),this.minChars=parseInt(e.dataset.lbMin,10)||1,this.delay=parseInt(e.dataset.lbDelay,10)||300,this.paramName=e.dataset.lbParam||"q",this.hiddenSelector=e.dataset.lbHidden,this.displayProp=e.dataset.lbDisplay||"title",this.template=e.dataset.lbTemplate||"default",this.abortController=null,this.debounceTimer=null,this.selectedIndex=-1,this.items=[],this.isOpen=!1,this._init()}o.prototype._init=function(){if(this.target){if(this.target.classList.add("lb-quick-search-results"),this.input.classList.add("lb-quick-search-input"),!this.input.parentElement.classList.contains("lb-quick-search-wrapper")){const e=t.createElement("div");e.className="lb-quick-search-wrapper",this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(this.target)}this.input.addEventListener("input",this._onInput.bind(this)),this.input.addEventListener("keydown",this._onKeydown.bind(this)),this.input.addEventListener("focus",this._onFocus.bind(this)),this.input.addEventListener("blur",this._onBlur.bind(this)),this.target.addEventListener("mousedown",this._onResultClick.bind(this)),this.input.setAttribute("role","combobox"),this.input.setAttribute("aria-autocomplete","list"),this.input.setAttribute("aria-expanded","false"),this.target.setAttribute("role","listbox")}else this.LiveBlade.utils.warn("Quick Search: Target not found:",this.targetSelector)},o.prototype._onInput=function(e){const t=e.target.value.trim();this._clearHidden(),t.length<this.minChars?this._hideResults():(clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>this._search(t),this.delay))},o.prototype._onKeydown=function(e){if(this.isOpen)switch(e.key){case"ArrowDown":e.preventDefault(),this._navigate(1);break;case"ArrowUp":e.preventDefault(),this._navigate(-1);break;case"Enter":e.preventDefault(),this.selectedIndex>=0&&this._selectItem(this.items[this.selectedIndex]);break;case"Escape":e.preventDefault(),this._hideResults();break;case"Tab":this._hideResults()}else"ArrowDown"===e.key&&this.input.value.length>=this.minChars&&this._search(this.input.value.trim())},o.prototype._onFocus=function(){this.items.length>0&&this.input.value.length>=this.minChars&&this._showResults()},o.prototype._onBlur=function(){setTimeout(()=>this._hideResults(),150)},o.prototype._onResultClick=function(e){const t=e.target.closest(".lb-qs-item");if(!t)return;e.preventDefault();const s=parseInt(t.dataset.index,10);this.items[s]&&this._selectItem(this.items[s])},o.prototype._search=async function(t){this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const s=new URL(this.url,e.location.href);s.searchParams.set(this.paramName,t),this.input.classList.add("lb-qs-loading");try{const e=await fetch(s.toString(),{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":this.LiveBlade.getCsrf()},credentials:"same-origin",signal:this.abortController.signal});if(!e.ok)throw new Error(`HTTP ${e.status}`);const i=await e.json();this.items=Array.isArray(i)?i:i.data??i.results??i.items??[],this._renderResults(),this._showResults(),this.LiveBlade.emit("quicksearch:results",{input:this.input,query:t,items:this.items})}catch(e){if("AbortError"===e.name)return;this.LiveBlade.utils.error("Quick Search error:",e),this._hideResults()}finally{this.input.classList.remove("lb-qs-loading")}},o.prototype._renderResults=function(){if(0===this.items.length)return void(this.target.innerHTML='<div class="lb-qs-empty">No results found</div>');const e="avatar"===this.template?n:r;this.target.innerHTML=this.items.map((t,s)=>{const i=e(t);return`\n                <div class="lb-qs-item" data-index="${s}" data-id="${a(t.id??"")}" role="option">\n                    ${i}\n                </div>\n            `}).join(""),this.selectedIndex=-1},o.prototype._navigate=function(e){const t=this.target.querySelectorAll(".lb-qs-item");if(0===t.length)return;this.selectedIndex>=0&&t[this.selectedIndex]&&t[this.selectedIndex].classList.remove("lb-qs-active"),this.selectedIndex+=e,this.selectedIndex<0&&(this.selectedIndex=t.length-1),this.selectedIndex>=t.length&&(this.selectedIndex=0);const s=t[this.selectedIndex];s.classList.add("lb-qs-active"),s.scrollIntoView({block:"nearest"}),this.input.setAttribute("aria-activedescendant",`lb-qs-item-${this.selectedIndex}`)},o.prototype._selectItem=function(e){const s=e[this.displayProp]??e.title??e.text??e.name??e.label??"";if(this.input.value=s,this.hiddenSelector){const s=t.querySelector(this.hiddenSelector);s&&(s.value=e.id??"")}this._hideResults(),this.LiveBlade.emit("quicksearch:select",{input:this.input,item:e}),this.input.dispatchEvent(new CustomEvent("lb:quicksearch:select",{detail:{item:e},bubbles:!0}))},o.prototype._showResults=function(){(0!==this.items.length||this.target.innerHTML)&&(this.target.classList.add("lb-qs-open"),this.input.setAttribute("aria-expanded","true"),this.isOpen=!0)},o.prototype._hideResults=function(){this.target.classList.remove("lb-qs-open"),this.input.setAttribute("aria-expanded","false"),this.isOpen=!1,this.selectedIndex=-1},o.prototype._clearHidden=function(){if(this.hiddenSelector){const e=t.querySelector(this.hiddenSelector);e&&(e.value="")}},o.prototype.clear=function(){this.input.value="",this._clearHidden(),this._hideResults(),this.items=[]};const l={init(e){e.QuickSearchController=o}},c={selector:"[data-lb-quick-search]",bind(e,t){e._lbQuickSearch||(e._lbQuickSearch=new o(e,t))}};e.LiveBlade&&(e.LiveBlade.registerFeature("quick-search",l),e.LiveBlade.registerBinder("quick-search",c)),"undefined"!=typeof module&&module.exports&&(module.exports={QuickSearchController:o,QuickSearchFeature:l,QuickSearchBinder:c})}(window,document),function(e,t){"use strict";function s(e,s){this.parent=e,this.LiveBlade=s,this.urlTemplate=e.dataset.lbFetch,this.targetSelector=e.dataset.lbTarget,this.child=t.querySelector(this.targetSelector),this.placeholder=e.dataset.lbPlaceholder||"Select...",this.loadingText=e.dataset.lbLoading||"Loading...",this.errorText=e.dataset.lbError||"Error loading options",this.valueField=e.dataset.lbValueField||"id",this.textField=e.dataset.lbTextField||"name",this.preselectedValue=e.dataset.lbSelected||null,this.abortController=null,this.originalPlaceholder=null,this.cache={},this._init()}s.prototype._init=function(){this.child?this.urlTemplate?(this.child.options.length>0&&""===this.child.options[0].value?this.originalPlaceholder=this.child.options[0].text:this.originalPlaceholder=this.placeholder,this.parent.value?this._loadOptions(this.parent.value):this._resetChild(),this.parent.addEventListener("change",this._onChange.bind(this))):console.warn("LiveBlade Cascade: data-lb-fetch is required"):console.warn("LiveBlade Cascade: Target not found:",this.targetSelector)},s.prototype._onChange=function(e){const t=e.target.value;t?this._loadOptions(t):this._resetChild()},s.prototype._loadOptions=async function(e){if(this.cache[e])return void this._populateOptions(this.cache[e]);this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const t=this.urlTemplate.replace("{value}",encodeURIComponent(e));this._setLoading(!0),this._emit("lb:cascade:loading",{parent:this.parent,child:this.child,value:e});try{const s=await fetch(t,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":this.LiveBlade.getCsrf()},credentials:"same-origin",signal:this.abortController.signal});if(!s.ok)throw new Error(`HTTP ${s.status}`);const i=await s.json(),r=Array.isArray(i)?i:i.data??i.options??i.items??[];this.cache[e]=r,this._populateOptions(r),this._emit("lb:cascade:loaded",{parent:this.parent,child:this.child,value:e,options:r})}catch(e){if("AbortError"===e.name)return;console.error("LiveBlade Cascade error:",e),this._setError(),this._emit("lb:cascade:error",{parent:this.parent,child:this.child,error:e})}},s.prototype._populateOptions=function(e){this.child.innerHTML="";const s=t.createElement("option");s.value="",s.textContent=this.originalPlaceholder,this.child.appendChild(s),e.forEach(e=>{const s=t.createElement("option");s.value=e[this.valueField]??e.id??e.value??"",s.textContent=e[this.textField]??e.name??e.text??e.label??"",this.preselectedValue&&s.value===this.preselectedValue&&(s.selected=!0,this.preselectedValue=null),this.child.appendChild(s)}),this.child.disabled=!1,this.child.classList.remove("lb-cascade-loading","lb-cascade-error"),this.child.value&&this.child.dispatchEvent(new Event("change",{bubbles:!0}))},s.prototype._resetChild=function(){this.child.innerHTML="";const e=t.createElement("option");e.value="",e.textContent=this.originalPlaceholder,this.child.appendChild(e),this.child.disabled=!0,this.child.classList.remove("lb-cascade-loading","lb-cascade-error"),this._emit("lb:cascade:reset",{parent:this.parent,child:this.child}),void 0!==this.child.dataset.lbCascade&&this.child.dispatchEvent(new Event("change",{bubbles:!0}))},s.prototype._setLoading=function(e){if(e){this.child.disabled=!0,this.child.classList.add("lb-cascade-loading"),this.child.classList.remove("lb-cascade-error"),this.child.innerHTML="";const e=t.createElement("option");e.value="",e.textContent=this.loadingText,this.child.appendChild(e)}},s.prototype._setError=function(){this.child.disabled=!0,this.child.classList.remove("lb-cascade-loading"),this.child.classList.add("lb-cascade-error"),this.child.innerHTML="";const e=t.createElement("option");e.value="",e.textContent=this.errorText,this.child.appendChild(e)},s.prototype._emit=function(e,t){this.parent.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0})),this.child.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0}))},s.prototype.clearCache=function(){this.cache={}},s.prototype.reload=function(){const e=this.parent.value;e&&(delete this.cache[e],this._loadOptions(e))};const i={init(e){e.CascadeController=s}},r={selector:"[data-lb-cascade]",bind(e,t){e._lbCascade||(e._lbCascade=new s(e,t))}};e.LiveBlade&&(e.LiveBlade.registerFeature("cascade",i),e.LiveBlade.registerBinder("cascade",r)),"undefined"!=typeof module&&module.exports&&(module.exports={CascadeController:s,CascadeFeature:i,CascadeBinder:r})}(window,document),function(e,t){"use strict";const s='\n        <div class="lb-confirm-overlay" role="dialog" aria-modal="true" aria-labelledby="lb-confirm-title">\n            <div class="lb-confirm-dialog">\n                <div class="lb-confirm-header">\n                    <h4 id="lb-confirm-title" class="lb-confirm-title"></h4>\n                </div>\n                <div class="lb-confirm-body">\n                    <p class="lb-confirm-message"></p>\n                </div>\n                <div class="lb-confirm-footer">\n                    <button type="button" class="lb-confirm-btn lb-confirm-btn-cancel"></button>\n                    <button type="button" class="lb-confirm-btn lb-confirm-btn-yes"></button>\n                </div>\n            </div>\n        </div>\n    ';let i=null,r=null;function n(e,n){const o=function(){if(i)return i;const e=t.createElement("div");e.innerHTML=s.trim(),i=e.firstChild,t.body.appendChild(i);const r=i.querySelector(".lb-confirm-btn-cancel"),n=i.querySelector(".lb-confirm-btn-yes"),o=i;return r.addEventListener("click",()=>a(!1)),n.addEventListener("click",()=>a(!0)),o.addEventListener("click",e=>{e.target===o&&a(!1)}),t.addEventListener("keydown",e=>{"Escape"===e.key&&i.classList.contains("lb-confirm-show")&&a(!1)}),i}();r=n,o.querySelector(".lb-confirm-title").textContent=e.title||"Confirm",o.querySelector(".lb-confirm-message").textContent=e.message,o.querySelector(".lb-confirm-btn-cancel").textContent=e.cancelText||"Cancel",o.querySelector(".lb-confirm-btn-yes").textContent=e.confirmText||"Yes",o.classList.add("lb-confirm-show"),o.querySelector(".lb-confirm-btn-yes").focus(),t.body.style.overflow="hidden"}function a(e){i&&(i.classList.remove("lb-confirm-show"),t.body.style.overflow="",r&&(r(e),r=null))}function o(e){e.classList.add("lb-row-removing"),e.addEventListener("animationend",()=>{e.remove()},{once:!0}),setTimeout(()=>{e.parentNode&&e.remove()},500)}function l(s,i,r){const n=t.querySelector(s);if(!n)return;const a=t.createElement("div");a.innerHTML=i.trim();const l=a.firstElementChild;l&&(l.classList.add("lb-row-updated"),n.replaceWith(l),setTimeout(()=>{l.classList.remove("lb-row-updated")},1e3),r&&setTimeout(()=>o(l),r),e.LiveBlade&&e.LiveBlade.bind&&e.LiveBlade.bind(l))}function c(e){const s=t.querySelector(e);s&&o(s)}function d(e,s="success",i){if(i.toast)return void i.toast(e,s);if(i.forms&&i.forms.showToast)return void i.forms.showToast(e,s);const r=t.createElement("div");r.className=`lb-toast lb-toast-${s}`,r.textContent=e;let n=t.querySelector(".lb-toast-container");n||(n=t.createElement("div"),n.className="lb-toast-container",t.body.appendChild(n)),n.appendChild(r),setTimeout(()=>r.classList.add("lb-toast-show"),10),setTimeout(()=>{r.classList.remove("lb-toast-show"),setTimeout(()=>r.remove(),300)},3e3)}function u(s,i,r,n){if(s&&s.type)switch(s.type){case"remove":s.target&&c(s.target);break;case"replace":s.target&&i&&l(s.target,i,s.fade);break;case"refresh":s.target&&function(e,s){e.split(",").map(e=>e.trim()).forEach(e=>{t.querySelector(e)&&s.refresh&&s.refresh(e)})}(s.target,n);break;case"redirect":s.redirect&&(e.location.href=s.redirect);break;case"remove-multiple":s.targets&&s.targets.forEach(e=>c(e));break;case"replace-multiple":s.items&&s.items.forEach(e=>{e.target&&e.html&&l(e.target,e.html,e.fade||s.fade)})}}async function h(t,s){const i=t.dataset.lbConfirm,r=t.dataset.lbFetch||t.getAttribute("href"),a=(t.dataset.lbMethod||"POST").toUpperCase(),o=t.dataset.lbConfirmTitle,l=t.dataset.lbConfirmYes,c=t.dataset.lbConfirmNo,h=new CustomEvent("lb:confirm:show",{detail:{element:t,message:i},bubbles:!0,cancelable:!0});t.dispatchEvent(h),h.defaultPrevented||n({title:o,message:i,confirmText:l,cancelText:c},async i=>{if(i){if(t.dispatchEvent(new CustomEvent("lb:confirm:confirmed",{detail:{element:t,url:r,method:a},bubbles:!0})),r)if("GET"!==a||t.dataset.lbFetch||!t.getAttribute("href")){t.classList.add("lb-confirm-loading"),t.disabled=!0;try{const e=await fetch(r,{method:a,headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":s.getCsrf()},credentials:"same-origin"}),i=await e.json();if(!e.ok||!1===i.success)throw new Error(i.error||i.message||`HTTP ${e.status}`);t.classList.remove("lb-confirm-loading"),t.classList.add("lb-confirm-success");const n=i.action||{},o=function(e){const t={};return e.dataset.lbRemove?(t.type="remove",t.target=e.dataset.lbRemove):e.dataset.lbReplace?(t.type="replace",t.target=e.dataset.lbReplace):e.dataset.lbRefresh?(t.type="refresh",t.target=e.dataset.lbRefresh):e.dataset.lbRedirect?(t.type="redirect",t.redirect=e.dataset.lbRedirect):e.dataset.lbTarget&&(t.type="refresh",t.target=e.dataset.lbTarget),e.dataset.lbFade&&(t.fade=parseInt(e.dataset.lbFade,10)),t.type?t:null}(t)||{},l={...o,...n};u(l,i.html,0,s),i.message&&d(i.message,"success",s),t.dispatchEvent(new CustomEvent("lb:confirm:success",{detail:{element:t,data:i,action:l},bubbles:!0})),setTimeout(()=>{t.classList.remove("lb-confirm-success"),t.disabled=!1},1500)}catch(e){console.error("Confirm action error:",e),t.classList.remove("lb-confirm-loading"),t.classList.add("lb-confirm-error"),t.disabled=!1,d(e.message||"An error occurred","error",s),t.dispatchEvent(new CustomEvent("lb:confirm:error",{detail:{element:t,error:e},bubbles:!0})),setTimeout(()=>{t.classList.remove("lb-confirm-error")},2e3)}}else e.location.href=t.getAttribute("href")}else t.dispatchEvent(new CustomEvent("lb:confirm:cancel",{detail:{element:t},bubbles:!0}))})}const p={selector:"[data-lb-confirm]",bind(e,t){e._lbConfirm||(e._lbConfirm=!0,e.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),h(e,t)}))}},b={init(e){e.confirm=function(e,t={}){return new Promise(s=>{n({message:e,title:t.title,confirmText:t.confirmText||t.yes,cancelText:t.cancelText||t.no},s)})}}};e.LiveBlade&&(e.LiveBlade.registerFeature("confirm",b),e.LiveBlade.registerBinder("confirm",p)),"undefined"!=typeof module&&module.exports&&(module.exports={ConfirmFeature:b,ConfirmBinder:p})}(window,document),function(e){"use strict";function t(e,t){this.container=e,this.LiveBlade=t,this.value=parseFloat(e.dataset.lbValue)||0,this.max=parseInt(e.dataset.lbMax,10)||5,this.url=e.dataset.lbFetch,this.paramName=e.dataset.lbParam||"rating",this.readonly=e.hasAttribute("data-lb-readonly"),this.allowHalf=e.hasAttribute("data-lb-half"),this.size=e.dataset.lbSize||"md",this.hoverValue=null,this._init()}t.prototype._init=function(){this.container.classList.add("lb-rating"),this.container.classList.add("lb-rating-"+this.size),this.readonly&&this.container.classList.add("lb-rating-readonly"),this._render(),this.readonly||(this.container.addEventListener("mousemove",this._onMouseMove.bind(this)),this.container.addEventListener("mouseleave",this._onMouseLeave.bind(this)),this.container.addEventListener("click",this._onClick.bind(this)),this.container.addEventListener("keydown",this._onKeyDown.bind(this)),this.container.setAttribute("tabindex","0"),this.container.setAttribute("role","slider"),this.container.setAttribute("aria-valuemin","0"),this.container.setAttribute("aria-valuemax",this.max.toString()),this.container.setAttribute("aria-valuenow",this.value.toString()),this.container.setAttribute("aria-label","Rating"))},t.prototype._render=function(){const e=null!==this.hoverValue?this.hoverValue:this.value;let t="";for(let s=1;s<=this.max;s++){const i="lb-rating-star";let r;r=e>=s?'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>':this.allowHalf&&e>=s-.5?'<svg viewBox="0 0 24 24"><defs><linearGradient id="half"><stop offset="50%" stop-color="currentColor"/><stop offset="50%" stop-color="transparent"/></linearGradient></defs><path fill="url(#half)" stroke="currentColor" stroke-width="2" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>':'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>',t+=`<span class="${i}" data-value="${s}">${r}</span>`}this.container.innerHTML=t},t.prototype._getValueFromEvent=function(e){const t=e.target.closest(".lb-rating-star");if(!t)return null;let s=parseInt(t.dataset.value,10);if(this.allowHalf){const i=t.getBoundingClientRect();e.clientX-i.left<i.width/2&&(s-=.5)}return s},t.prototype._onMouseMove=function(e){const t=this._getValueFromEvent(e);null!==t&&t!==this.hoverValue&&(this.hoverValue=t,this._render())},t.prototype._onMouseLeave=function(){this.hoverValue=null,this._render()},t.prototype._onClick=function(e){const t=this._getValueFromEvent(e);null!==t&&this._setValue(t)},t.prototype._onKeyDown=function(e){let t=this.value;const s=this.allowHalf?.5:1;switch(e.key){case"ArrowRight":case"ArrowUp":e.preventDefault(),t=Math.min(this.max,this.value+s);break;case"ArrowLeft":case"ArrowDown":e.preventDefault(),t=Math.max(0,this.value-s);break;case"Home":e.preventDefault(),t=0;break;case"End":e.preventDefault(),t=this.max;break;default:return}t!==this.value&&this._setValue(t)},t.prototype._setValue=async function(e){const t=this.value;this.value=e,this.hoverValue=null,this._render(),this.container.setAttribute("aria-valuenow",e.toString()),this.container.dataset.lbValue=e.toString();const s=new CustomEvent("lb:rating:change",{detail:{element:this.container,value:e,oldValue:t},bubbles:!0,cancelable:!0});if(this.container.dispatchEvent(s),s.defaultPrevented)return this.value=t,void this._render();this.url&&await this._postRating(e,t)},t.prototype._postRating=async function(e,t){this.container.classList.add("lb-rating-loading");try{const t={};t[this.paramName]=e;const s=await fetch(this.url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":this.LiveBlade.getCsrf()},credentials:"same-origin",body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP ${s.status}`);const i=await s.json();this.container.classList.remove("lb-rating-loading"),this.container.classList.add("lb-rating-success"),this.container.dispatchEvent(new CustomEvent("lb:rating:success",{detail:{element:this.container,value:e,data:i},bubbles:!0})),setTimeout(()=>{this.container.classList.remove("lb-rating-success")},1e3)}catch(e){console.error("Rating error:",e),this.value=t,this._render(),this.container.classList.remove("lb-rating-loading"),this.container.classList.add("lb-rating-error"),this.container.dispatchEvent(new CustomEvent("lb:rating:error",{detail:{element:this.container,error:e},bubbles:!0})),setTimeout(()=>{this.container.classList.remove("lb-rating-error")},2e3)}},t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){this._setValue(e)};const s={selector:"[data-lb-rating]",bind(e,s){e._lbRating||(e._lbRating=new t(e,s))}},i={init(e){e.RatingController=t}};e.LiveBlade&&(e.LiveBlade.registerFeature("rating",i),e.LiveBlade.registerBinder("rating",s)),"undefined"!=typeof module&&module.exports&&(module.exports={RatingController:t,RatingFeature:i,RatingBinder:s})}(window,document),function(e,t){"use strict";function s(e,s){this.input=e,this.LiveBlade=s,this.type=e.dataset.lbCounter||"chars",""!==this.type&&"true"!==this.type||(this.type="chars"),this.max=e.dataset.lbMax?parseInt(e.dataset.lbMax,10):null,this.min=e.dataset.lbMin?parseInt(e.dataset.lbMin,10):null,this.warn=e.dataset.lbWarn?parseInt(e.dataset.lbWarn,10):null,this.targetSelector=e.dataset.lbTarget,this.format=e.dataset.lbFormat||"fraction",this.blockInput=e.hasAttribute("data-lb-block"),this.target=t.querySelector(this.targetSelector),this.lastCount=0,this._init()}s.prototype._init=function(){this.target?(this.input.classList.add("lb-counter-input"),this._update(),this.input.addEventListener("input",this._onInput.bind(this)),this.input.addEventListener("paste",()=>setTimeout(()=>this._onInput(),0)),this.blockInput&&this.max&&"chars"===this.type&&this.input.addEventListener("keypress",this._onKeyPress.bind(this))):console.warn("LiveBlade Counter: Target not found:",this.targetSelector)},s.prototype._getCount=function(){const e=this.input.value;if("words"===this.type){const t=e.trim().split(/\s+/).filter(e=>e.length>0);return""===e.trim()?0:t.length}return e.length},s.prototype._onInput=function(){this._update()},s.prototype._onKeyPress=function(e){if(this.max&&this._getCount()>=this.max){if(e.ctrlKey||e.metaKey||"Backspace"===e.key||"Delete"===e.key)return;e.preventDefault()}},s.prototype._update=function(){const e=this._getCount(),t=this.lastCount>this.max,s=this.max&&e>this.max,i=this.min&&e<this.min,r=this.warn&&e>=this.warn,n=this.max&&e>=this.max;this._updateDisplay(e),this._updateClasses(e,s,i,r,n),e!==this.lastCount&&(this._emit("lb:counter:update",{count:e,max:this.max,type:this.type}),n&&!t&&this._emit("lb:counter:max",{count:e}),r&&this.lastCount<this.warn&&this._emit("lb:counter:warn",{count:e,warn:this.warn}),s||i?this._emit("lb:counter:invalid",{count:e,max:this.max,min:this.min}):!(t||this.min&&this.lastCount<this.min)||s||i||this._emit("lb:counter:valid",{count:e})),this.lastCount=e},s.prototype._updateDisplay=function(e){let t;const s="words"===this.type?"words":"characters";switch(this.format){case"remaining":if(this.max){const i=this.max-e;t=i>=0?`${i} ${s} remaining`:`${Math.abs(i)} ${s} over limit`}else t=`${e} ${s}`;break;case"count":t=e.toString();break;default:t=this.max?`${e}/${this.max}`:`${e} ${s}`}this.target.textContent=t},s.prototype._updateClasses=function(e,t,s,i,r){this.input.classList.toggle("lb-counter-warn",i&&!t),this.input.classList.toggle("lb-counter-error",t||s),this.input.classList.toggle("lb-counter-max",r&&!t),this.target.classList.toggle("lb-counter-warn",i&&!t),this.target.classList.toggle("lb-counter-error",t||s),this.target.classList.toggle("lb-counter-max",r&&!t)},s.prototype._emit=function(e,t){this.input.dispatchEvent(new CustomEvent(e,{detail:{element:this.input,target:this.target,...t},bubbles:!0}))},s.prototype.getCount=function(){return this._getCount()},s.prototype.isValid=function(){const e=this._getCount();return!(this.max&&e>this.max)&&!(this.min&&e<this.min)};const i={selector:"[data-lb-counter]",bind(e,t){e._lbCounter||(e._lbCounter=new s(e,t))}},r={init(e){e.CounterController=s}};e.LiveBlade&&(e.LiveBlade.registerFeature("counter",r),e.LiveBlade.registerBinder("counter",i)),"undefined"!=typeof module&&module.exports&&(module.exports={CounterController:s,CounterFeature:r,CounterBinder:i})}(window,document),function(e,t){"use strict";function s(t,s,o,d){if(!t||!t.type)return;const u=t.type,h=t.target,p=t.fade;switch(u){case"prepend":h&&s&&i(h,s,p);break;case"append":h&&s&&r(h,s,p);break;case"replace":h&&s&&n(h,s,p);break;case"remove":h&&a(h);break;case"refresh":h&&l(h,d);break;case"redirect":t.redirect&&(e.location.href=t.redirect);break;case"replace-multiple":t.items&&Array.isArray(t.items)&&t.items.forEach(e=>{e.target&&e.html&&n(e.target,e.html,e.fade||p)});break;case"remove-multiple":t.targets&&Array.isArray(t.targets)&&t.targets.forEach(e=>a(e))}t.close&&c(t.close)}function i(s,i,r){const n=t.querySelector(s);if(!n)return void console.warn("LiveBlade Forms: Prepend target not found:",s);const a=t.createElement("div");a.innerHTML=i.trim();const l=a.firstElementChild;l&&(l.classList.add("lb-row-new"),n.insertBefore(l,n.firstChild),setTimeout(()=>{l.classList.remove("lb-row-new")},1e3),r&&setTimeout(()=>{o(l)},r),e.LiveBlade&&e.LiveBlade.bind&&e.LiveBlade.bind(l))}function r(s,i,r){const n=t.querySelector(s);if(!n)return void console.warn("LiveBlade Forms: Append target not found:",s);const a=t.createElement("div");a.innerHTML=i.trim();const l=a.firstElementChild;l&&(l.classList.add("lb-row-new"),n.appendChild(l),setTimeout(()=>{l.classList.remove("lb-row-new")},1e3),r&&setTimeout(()=>{o(l)},r),e.LiveBlade&&e.LiveBlade.bind&&e.LiveBlade.bind(l))}function n(s,i,r){const n=t.querySelector(s);if(!n)return void console.warn("LiveBlade Forms: Replace target not found:",s);const a=t.createElement("div");a.innerHTML=i.trim();const l=a.firstElementChild;l&&(l.classList.add("lb-row-updated"),n.replaceWith(l),setTimeout(()=>{l.classList.remove("lb-row-updated")},1e3),r&&setTimeout(()=>{o(l)},r),e.LiveBlade&&e.LiveBlade.bind&&e.LiveBlade.bind(l))}function a(e){const s=t.querySelector(e);s?o(s):console.warn("LiveBlade Forms: Remove target not found:",e)}function o(e){e.classList.add("lb-row-removing"),e.addEventListener("animationend",()=>{e.remove()},{once:!0}),setTimeout(()=>{e.parentNode&&e.remove()},500)}function l(e,s){e.split(",").map(e=>e.trim()).forEach(e=>{t.querySelector(e)&&s.refresh&&s.refresh(e)})}function c(s){const i=t.querySelector(s);if(!i)return;if(e.bootstrap&&e.bootstrap.Modal){const t=e.bootstrap.Modal.getInstance(i);if(t)return void t.hide()}if(e.jQuery&&e.jQuery.fn.modal)return void e.jQuery(i).modal("hide");i.classList.remove("show"),i.style.display="none",t.body.classList.remove("modal-open");const r=t.querySelector(".modal-backdrop");r&&r.remove()}function d(e,s="success",i){if(i.toast)return void i.toast(e,s);const r=t.createElement("div");r.className=`lb-toast lb-toast-${s}`,r.textContent=e;let n=t.querySelector(".lb-toast-container");n||(n=t.createElement("div"),n.className="lb-toast-container",t.body.appendChild(n)),n.appendChild(r),setTimeout(()=>r.classList.add("lb-toast-show"),10),setTimeout(()=>{r.classList.remove("lb-toast-show"),setTimeout(()=>r.remove(),300)},3e3)}function u(e){e.querySelectorAll(".lb-input-error").forEach(e=>{e.classList.remove("lb-input-error")}),e.querySelectorAll(".lb-field-error").forEach(e=>e.remove());const t=e.querySelector("[data-lb-errors]");t&&(t.innerHTML="")}async function h(e,i,r){e.preventDefault();const n=new CustomEvent("lb:form:submit",{detail:{form:i},bubbles:!0,cancelable:!0});if(i.dispatchEvent(n),n.defaultPrevented)return;const a=new FormData(i),o=i.action,l=(i.method||"POST").toUpperCase(),c=i.querySelector('[type="submit"]'),h=c?c.innerHTML:"";c&&(c.disabled=!0,c.classList.add("lb-form-loading")),u(i);try{const e={method:"GET"===l?"GET":"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":r.getCsrf()},credentials:"same-origin"};"GET"!==l&&"POST"!==l&&a.append("_method",l),"GET"!==l&&(e.body=a);const n=await fetch(o,e),c=await n.json();if(!n.ok||!1===c.success){const e=c.error||c.message||"An error occurred";c.errors&&function(e,s){if(u(e),!s||"object"!=typeof s)return;Object.keys(s).forEach(i=>{const r=e.querySelector(`[name="${i}"]`),n=Array.isArray(s[i])?s[i]:[s[i]];if(r){r.classList.add("lb-input-error");const e=t.createElement("div");e.className="lb-field-error",e.textContent=n[0],r.parentNode.insertBefore(e,r.nextSibling)}});const i=e.querySelector("[data-lb-errors]");if(i){const e=Object.values(s).flat();i.innerHTML=e.map(e=>`<div class="lb-error-message">${e}</div>`).join("")}}(i,c.errors);return d(i.dataset.lbError||e,"error",r),void i.dispatchEvent(new CustomEvent("lb:form:error",{detail:{form:i,error:e,errors:c.errors,data:c},bubbles:!0}))}const h=c.action||{},p=function(e){const t={};return e.dataset.lbPrepend?(t.type="prepend",t.target=e.dataset.lbPrepend):e.dataset.lbAppend?(t.type="append",t.target=e.dataset.lbAppend):e.dataset.lbReplace?(t.type="replace",t.target=e.dataset.lbReplace):e.dataset.lbRemove?(t.type="remove",t.target=e.dataset.lbRemove):e.dataset.lbRefresh?(t.type="refresh",t.target=e.dataset.lbRefresh):e.dataset.lbRedirect&&(t.type="redirect",t.redirect=e.dataset.lbRedirect),e.dataset.lbClose&&(t.close=e.dataset.lbClose),e.dataset.lbFade&&(t.fade=parseInt(e.dataset.lbFade,10)),t.type?t:null}(i)||{},b={...p,...h};s(b,c.html,0,r);const m=c.message||i.dataset.lbSuccess;m&&d(m,"success",r),"false"!==i.dataset.lbReset&&i.reset(),i.dispatchEvent(new CustomEvent("lb:form:success",{detail:{form:i,data:c,action:b},bubbles:!0}))}catch(e){console.error("LiveBlade Form error:",e);d(i.dataset.lbError||"An error occurred. Please try again.","error",r),i.dispatchEvent(new CustomEvent("lb:form:error",{detail:{form:i,error:e},bubbles:!0}))}finally{c&&(c.disabled=!1,c.classList.remove("lb-form-loading"),c.innerHTML=h)}}const p={selector:"[data-lb-form]",bind(e,t){e._lbForm||(e._lbForm=!0,e.addEventListener("submit",s=>h(s,e,t)))}},b={init(e){e.forms={prepend:i,append:r,replace:n,remove:a,refresh:t=>l(t,e),closeModal:c,showToast:(t,s)=>d(t,s,e),processAction:(t,i)=>s(t,i,0,e)}}};e.LiveBlade&&(e.LiveBlade.registerFeature("forms",b),e.LiveBlade.registerBinder("forms",p)),"undefined"!=typeof module&&module.exports&&(module.exports={FormsFeature:b,FormsBinder:p})}(window,document);